{"/home/travis/build/npmtest/node-npmtest-flightplan/test.js":{"path":"/home/travis/build/npmtest/node-npmtest-flightplan/test.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":1,"12":1,"13":1,"14":1,"15":2,"16":2,"17":2,"18":2,"19":1,"20":1,"21":2,"22":2,"23":2,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":2,"40":2,"41":1,"42":2,"43":2,"44":1,"45":2,"46":2,"47":1,"48":2,"49":2,"50":1,"51":1,"52":1,"53":1,"54":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[1,1],"5":[1,1],"6":[1,1],"7":[1,1],"8":[1,1],"9":[1,1],"10":[1,1,1],"11":[1,1],"12":[1,1],"13":[1,1],"14":[1,1],"15":[1,1],"16":[1,1],"17":[1,1]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":1,"7":1,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}},"4":{"name":"(anonymous_4)","line":61,"loc":{"start":{"line":61,"column":5},"end":{"line":61,"column":17}}},"5":{"name":"(anonymous_5)","line":82,"loc":{"start":{"line":82,"column":5},"end":{"line":82,"column":17}}},"6":{"name":"(anonymous_6)","line":91,"loc":{"start":{"line":91,"column":77},"end":{"line":94,"column":10}}},"7":{"name":"(anonymous_7)","line":112,"loc":{"start":{"line":112,"column":83},"end":{"line":115,"column":10}},"skip":true},"8":{"name":"(anonymous_8)","line":123,"loc":{"start":{"line":123,"column":77},"end":{"line":126,"column":10}},"skip":true},"9":{"name":"(anonymous_9)","line":139,"loc":{"start":{"line":139,"column":12},"end":{"line":139,"column":40}},"skip":true},"10":{"name":"(anonymous_10)","line":147,"loc":{"start":{"line":147,"column":77},"end":{"line":150,"column":10}},"skip":true},"11":{"name":"(anonymous_11)","line":158,"loc":{"start":{"line":158,"column":83},"end":{"line":161,"column":10}},"skip":true},"12":{"name":"(anonymous_12)","line":169,"loc":{"start":{"line":169,"column":79},"end":{"line":172,"column":10}},"skip":true},"13":{"name":"(anonymous_13)","line":180,"loc":{"start":{"line":180,"column":75},"end":{"line":183,"column":10}},"skip":true}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":195,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":56,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":40,"column":8},"end":{"line":53,"column":9}},"11":{"start":{"line":43,"column":12},"end":{"line":46,"column":14}},"12":{"start":{"line":47,"column":12},"end":{"line":47,"column":18}},"13":{"start":{"line":50,"column":12},"end":{"line":51,"column":33}},"14":{"start":{"line":52,"column":12},"end":{"line":52,"column":18}},"15":{"start":{"line":55,"column":8},"end":{"line":55,"column":35}},"16":{"start":{"line":61,"column":4},"end":{"line":63,"column":9}},"17":{"start":{"line":62,"column":8},"end":{"line":62,"column":15}},"18":{"start":{"line":64,"column":4},"end":{"line":77,"column":5}},"19":{"start":{"line":70,"column":8},"end":{"line":70,"column":14}},"20":{"start":{"line":76,"column":8},"end":{"line":76,"column":14}},"21":{"start":{"line":82,"column":4},"end":{"line":84,"column":9}},"22":{"start":{"line":83,"column":8},"end":{"line":83,"column":15}},"23":{"start":{"line":85,"column":4},"end":{"line":194,"column":5}},"24":{"start":{"line":91,"column":8},"end":{"line":99,"column":10}},"25":{"start":{"line":98,"column":12},"end":{"line":98,"column":35}},"26":{"start":{"line":102,"column":8},"end":{"line":104,"column":63}},"27":{"start":{"line":105,"column":8},"end":{"line":105,"column":14}},"28":{"start":{"line":112,"column":8},"end":{"line":121,"column":10},"skip":true},"29":{"start":{"line":119,"column":12},"end":{"line":119,"column":55},"skip":true},"30":{"start":{"line":120,"column":12},"end":{"line":120,"column":48},"skip":true},"31":{"start":{"line":123,"column":8},"end":{"line":136,"column":10},"skip":true},"32":{"start":{"line":130,"column":12},"end":{"line":130,"column":76},"skip":true},"33":{"start":{"line":131,"column":12},"end":{"line":131,"column":73},"skip":true},"34":{"start":{"line":132,"column":12},"end":{"line":132,"column":74},"skip":true},"35":{"start":{"line":133,"column":12},"end":{"line":133,"column":79},"skip":true},"36":{"start":{"line":134,"column":12},"end":{"line":134,"column":25},"skip":true},"37":{"start":{"line":135,"column":12},"end":{"line":135,"column":45},"skip":true},"38":{"start":{"line":138,"column":8},"end":{"line":145,"column":14},"skip":true},"39":{"start":{"line":143,"column":16},"end":{"line":143,"column":29},"skip":true},"40":{"start":{"line":144,"column":16},"end":{"line":144,"column":55},"skip":true},"41":{"start":{"line":147,"column":8},"end":{"line":156,"column":10},"skip":true},"42":{"start":{"line":154,"column":12},"end":{"line":154,"column":25},"skip":true},"43":{"start":{"line":155,"column":12},"end":{"line":155,"column":45},"skip":true},"44":{"start":{"line":158,"column":8},"end":{"line":167,"column":10},"skip":true},"45":{"start":{"line":165,"column":12},"end":{"line":165,"column":25},"skip":true},"46":{"start":{"line":166,"column":12},"end":{"line":166,"column":48},"skip":true},"47":{"start":{"line":169,"column":8},"end":{"line":178,"column":10},"skip":true},"48":{"start":{"line":176,"column":12},"end":{"line":176,"column":25},"skip":true},"49":{"start":{"line":177,"column":12},"end":{"line":177,"column":46},"skip":true},"50":{"start":{"line":180,"column":8},"end":{"line":189,"column":10},"skip":true},"51":{"start":{"line":187,"column":12},"end":{"line":187,"column":94},"skip":true},"52":{"start":{"line":188,"column":12},"end":{"line":188,"column":48},"skip":true},"53":{"start":{"line":192,"column":8},"end":{"line":192,"column":35},"skip":true},"54":{"start":{"line":193,"column":8},"end":{"line":193,"column":14},"skip":true}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":40,"type":"switch","locations":[{"start":{"line":42,"column":8},"end":{"line":47,"column":18}},{"start":{"line":49,"column":8},"end":{"line":52,"column":18}}]},"5":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":16},"end":{"line":44,"column":44}},{"start":{"line":44,"column":48},"end":{"line":44,"column":66}}]},"6":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":21},"end":{"line":50,"column":49}},{"start":{"line":50,"column":53},"end":{"line":50,"column":72}}]},"7":{"line":64,"type":"switch","locations":[{"start":{"line":69,"column":4},"end":{"line":70,"column":14}},{"start":{"line":75,"column":4},"end":{"line":76,"column":14}}]},"8":{"line":85,"type":"switch","locations":[{"start":{"line":90,"column":4},"end":{"line":105,"column":14}},{"start":{"line":111,"column":4},"end":{"line":193,"column":14},"skip":true}]},"9":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":42},"end":{"line":91,"column":73}},{"start":{"line":91,"column":77},"end":{"line":99,"column":9}}]},"10":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":18},"end":{"line":102,"column":32}},{"start":{"line":103,"column":12},"end":{"line":103,"column":53}},{"start":{"line":104,"column":12},"end":{"line":104,"column":61}}]},"11":{"line":112,"type":"binary-expr","locations":[{"start":{"line":112,"column":45},"end":{"line":112,"column":79},"skip":true},{"start":{"line":112,"column":83},"end":{"line":121,"column":9},"skip":true}]},"12":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":42},"end":{"line":123,"column":73},"skip":true},{"start":{"line":123,"column":77},"end":{"line":136,"column":9},"skip":true}]},"13":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":48},"end":{"line":138,"column":85},"skip":true},{"start":{"line":139,"column":12},"end":{"line":145,"column":13},"skip":true}]},"14":{"line":147,"type":"binary-expr","locations":[{"start":{"line":147,"column":42},"end":{"line":147,"column":73},"skip":true},{"start":{"line":147,"column":77},"end":{"line":156,"column":9},"skip":true}]},"15":{"line":158,"type":"binary-expr","locations":[{"start":{"line":158,"column":45},"end":{"line":158,"column":79},"skip":true},{"start":{"line":158,"column":83},"end":{"line":167,"column":9},"skip":true}]},"16":{"line":169,"type":"binary-expr","locations":[{"start":{"line":169,"column":43},"end":{"line":169,"column":75},"skip":true},{"start":{"line":169,"column":79},"end":{"line":178,"column":9},"skip":true}]},"17":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":41},"end":{"line":180,"column":71},"skip":true},{"start":{"line":180,"column":75},"end":{"line":189,"column":9},"skip":true}]}},"code":["/* istanbul instrument in package npmtest_flightplan */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - init-before","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        switch (local.modeJs) {","        // re-init local from window.local","        case 'browser':","            local = local.global.utility2.objectSetDefault(","                local.global.utility2_rollup || local.global.local,","                local.global.utility2","            );","            break;","        // re-init local from example.js","        case 'node':","            local = (local.global.utility2_rollup || require('utility2'))","                .requireReadme();","            break;","        }","        // export local","        local.global.local = local;","    }());","","","","    // run shared js-env code - function","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - function","    case 'browser':","        break;","","","","    // run node js-env code - function","    case 'node':","        break;","    }","","","","    // run shared js-env code - init-after","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - init-after","    case 'browser':","        local.testCase_browser_nullCase = local.testCase_browser_nullCase || function (","            options,","            onError","        ) {","        /*","         * this function will test browsers's null-case handling-behavior-behavior","         */","            onError(null, options);","        };","","        // run tests","        local.nop(local.modeTest &&","            document.querySelector('#testRunButton1') &&","            document.querySelector('#testRunButton1').click());","        break;","","","","    // run node js-env code - init-after","    /* istanbul ignore next */","    case 'node':","        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApidoc's default handling-behavior-behavior","         */","            options = { modulePathList: module.paths };","            local.buildApidoc(options, onError);","        };","","        local.testCase_buildApp_default = local.testCase_buildApp_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApp's default handling-behavior-behavior","         */","            local.testCase_buildReadme_default(options, local.onErrorThrow);","            local.testCase_buildLib_default(options, local.onErrorThrow);","            local.testCase_buildTest_default(options, local.onErrorThrow);","            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);","            options = [];","            local.buildApp(options, onError);","        };","","        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||","            function (options, onError) {","            /*","             * this function will test buildCustomOrg's default handling-behavior","             */","                options = {};","                local.buildCustomOrg(options, onError);","            };","","        local.testCase_buildLib_default = local.testCase_buildLib_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildLib's default handling-behavior","         */","            options = {};","            local.buildLib(options, onError);","        };","","        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildReadme's default handling-behavior-behavior","         */","            options = {};","            local.buildReadme(options, onError);","        };","","        local.testCase_buildTest_default = local.testCase_buildTest_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildTest's default handling-behavior","         */","            options = {};","            local.buildTest(options, onError);","        };","","        local.testCase_webpage_default = local.testCase_webpage_default || function (","            options,","            onError","        ) {","        /*","         * this function will test webpage's default handling-behavior","         */","            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };","            local.browserTest(options, onError);","        };","","        // run test-server","        local.testRunServer(local);","        break;","    }","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"40":2,"43":1,"47":1,"50":1,"52":1,"55":2,"61":2,"62":2,"64":2,"70":1,"76":1,"82":2,"83":2,"85":2,"91":1,"98":1,"102":1,"105":1,"112":1,"119":1,"120":1,"123":1,"130":1,"131":1,"132":1,"133":1,"134":1,"135":1,"138":1,"143":2,"144":2,"147":1,"154":2,"155":2,"158":1,"165":2,"166":2,"169":1,"176":2,"177":2,"180":1,"187":1,"188":1,"192":1,"193":1}},"/home/travis/build/npmtest/node-npmtest-flightplan/lib.npmtest_flightplan.js":{"path":"/home/travis/build/npmtest/node-npmtest-flightplan/lib.npmtest_flightplan.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":1,"15":1,"16":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1]},"f":{"1":2,"2":2,"3":2},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":53,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":52,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":41,"column":8},"end":{"line":41,"column":54}},"11":{"start":{"line":43,"column":8},"end":{"line":43,"column":55}},"12":{"start":{"line":45,"column":8},"end":{"line":51,"column":9}},"13":{"start":{"line":46,"column":12},"end":{"line":46,"column":61}},"14":{"start":{"line":48,"column":12},"end":{"line":48,"column":35}},"15":{"start":{"line":49,"column":12},"end":{"line":49,"column":49}},"16":{"start":{"line":50,"column":12},"end":{"line":50,"column":43}}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":16},"end":{"line":41,"column":44}},{"start":{"line":41,"column":48},"end":{"line":41,"column":53}}]},"5":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":45,"column":8}},{"start":{"line":45,"column":8},"end":{"line":45,"column":8}}]}},"code":["/* istanbul instrument in package npmtest_flightplan */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - init-before","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || local;","        // init lib","        local.local = local.npmtest_flightplan = local;","        // init exports","        if (local.modeJs === 'browser') {","            local.global.utility2_npmtest_flightplan = local;","        } else {","            module.exports = local;","            module.exports.__dirname = __dirname;","            module.exports.module = module;","        }","    }());","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"41":2,"43":2,"45":2,"46":1,"48":1,"49":1,"50":1}},"/home/travis/build/npmtest/node-npmtest-flightplan/example.js":{"path":"/home/travis/build/npmtest/node-npmtest-flightplan/example.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":2,"15":2,"16":2,"17":2,"18":2,"19":0,"20":2,"21":1,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":2,"31":0,"32":0,"33":0,"34":1,"35":2,"36":2,"37":3,"38":3,"39":3,"40":3,"41":0,"42":3,"43":3,"44":3,"45":1,"46":3,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":0,"58":1,"59":6,"60":6,"61":1,"62":2,"63":0,"64":2,"65":1,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1],"6":[1,1],"7":[2,0],"8":[2,1,1,1,1,1],"9":[0,2,0],"10":[1,1],"11":[2,1,1],"12":[1,0],"13":[0,2],"14":[2,0,0,0,0,0,0],"15":[0,3],"16":[3,0],"17":[1,1],"18":[0,1],"19":[1,2,0,2],"20":[1,0],"21":[1,1],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":3,"8":3,"9":3,"10":1,"11":6,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":26,"loc":{"start":{"line":26,"column":1},"end":{"line":26,"column":13}}},"2":{"name":"(anonymous_2)","line":33,"loc":{"start":{"line":33,"column":5},"end":{"line":33,"column":17}}},"3":{"name":"(anonymous_3)","line":37,"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":36}}},"4":{"name":"(anonymous_4)","line":69,"loc":{"start":{"line":69,"column":31},"end":{"line":69,"column":48}},"skip":true},"5":{"name":"(anonymous_5)","line":78,"loc":{"start":{"line":78,"column":26},"end":{"line":78,"column":45}},"skip":true},"6":{"name":"(anonymous_6)","line":123,"loc":{"start":{"line":123,"column":33},"end":{"line":123,"column":48}},"skip":true},"7":{"name":"(anonymous_7)","line":125,"loc":{"start":{"line":125,"column":27},"end":{"line":125,"column":39}},"skip":true},"8":{"name":"(anonymous_8)","line":133,"loc":{"start":{"line":133,"column":59},"end":{"line":133,"column":74}},"skip":true},"9":{"name":"(anonymous_9)","line":143,"loc":{"start":{"line":143,"column":45},"end":{"line":143,"column":62}},"skip":true},"10":{"name":"(anonymous_10)","line":144,"loc":{"start":{"line":144,"column":73},"end":{"line":144,"column":92}},"skip":true},"11":{"name":"(anonymous_11)","line":272,"loc":{"start":{"line":272,"column":51},"end":{"line":272,"column":77}},"skip":true},"12":{"name":"(anonymous_12)","line":315,"loc":{"start":{"line":315,"column":32},"end":{"line":315,"column":61}},"skip":true}},"statementMap":{"1":{"start":{"line":26,"column":0},"end":{"line":326,"column":5}},"2":{"start":{"line":28,"column":4},"end":{"line":28,"column":14}},"3":{"start":{"line":33,"column":4},"end":{"line":60,"column":9}},"4":{"start":{"line":35,"column":8},"end":{"line":35,"column":19}},"5":{"start":{"line":37,"column":8},"end":{"line":49,"column":13}},"6":{"start":{"line":38,"column":12},"end":{"line":48,"column":13}},"7":{"start":{"line":39,"column":16},"end":{"line":42,"column":30}},"8":{"start":{"line":44,"column":16},"end":{"line":47,"column":27}},"9":{"start":{"line":51,"column":8},"end":{"line":53,"column":21}},"10":{"start":{"line":55,"column":8},"end":{"line":57,"column":45}},"11":{"start":{"line":59,"column":8},"end":{"line":59,"column":35}},"12":{"start":{"line":61,"column":4},"end":{"line":325,"column":5}},"13":{"start":{"line":69,"column":8},"end":{"line":121,"column":10},"skip":true},"14":{"start":{"line":70,"column":12},"end":{"line":88,"column":13},"skip":true},"15":{"start":{"line":76,"column":16},"end":{"line":87,"column":19},"skip":true},"16":{"start":{"line":79,"column":20},"end":{"line":86,"column":21},"skip":true},"17":{"start":{"line":82,"column":24},"end":{"line":82,"column":43},"skip":true},"18":{"start":{"line":83,"column":24},"end":{"line":83,"column":30},"skip":true},"19":{"start":{"line":85,"column":24},"end":{"line":85,"column":49},"skip":true},"20":{"start":{"line":89,"column":12},"end":{"line":107,"column":13},"skip":true},"21":{"start":{"line":92,"column":16},"end":{"line":102,"column":17},"skip":true},"22":{"start":{"line":93,"column":20},"end":{"line":93,"column":86},"skip":true},"23":{"start":{"line":94,"column":20},"end":{"line":95,"column":45},"skip":true},"24":{"start":{"line":96,"column":20},"end":{"line":96,"column":42},"skip":true},"25":{"start":{"line":97,"column":20},"end":{"line":97,"column":48},"skip":true},"26":{"start":{"line":100,"column":20},"end":{"line":100,"column":85},"skip":true},"27":{"start":{"line":101,"column":20},"end":{"line":101,"column":96},"skip":true},"28":{"start":{"line":103,"column":16},"end":{"line":103,"column":22},"skip":true},"29":{"start":{"line":106,"column":16},"end":{"line":106,"column":22},"skip":true},"30":{"start":{"line":108,"column":12},"end":{"line":120,"column":13},"skip":true},"31":{"start":{"line":114,"column":16},"end":{"line":119,"column":17},"skip":true},"32":{"start":{"line":116,"column":20},"end":{"line":116,"column":78},"skip":true},"33":{"start":{"line":118,"column":20},"end":{"line":118,"column":47},"skip":true},"34":{"start":{"line":123,"column":8},"end":{"line":141,"column":11},"skip":true},"35":{"start":{"line":124,"column":12},"end":{"line":124,"column":54},"skip":true},"36":{"start":{"line":125,"column":12},"end":{"line":140,"column":14},"skip":true},"37":{"start":{"line":126,"column":16},"end":{"line":126,"column":28},"skip":true},"38":{"start":{"line":127,"column":16},"end":{"line":127,"column":69},"skip":true},"39":{"start":{"line":128,"column":16},"end":{"line":128,"column":75},"skip":true},"40":{"start":{"line":129,"column":16},"end":{"line":131,"column":17},"skip":true},"41":{"start":{"line":130,"column":20},"end":{"line":130,"column":27},"skip":true},"42":{"start":{"line":133,"column":16},"end":{"line":137,"column":36},"skip":true},"43":{"start":{"line":134,"column":20},"end":{"line":136,"column":55},"skip":true},"44":{"start":{"line":139,"column":16},"end":{"line":139,"column":57},"skip":true},"45":{"start":{"line":143,"column":8},"end":{"line":147,"column":11},"skip":true},"46":{"start":{"line":144,"column":12},"end":{"line":146,"column":15},"skip":true},"47":{"start":{"line":145,"column":16},"end":{"line":145,"column":70},"skip":true},"48":{"start":{"line":149,"column":8},"end":{"line":149,"column":31},"skip":true},"49":{"start":{"line":150,"column":8},"end":{"line":150,"column":14},"skip":true},"50":{"start":{"line":158,"column":8},"end":{"line":158,"column":31},"skip":true},"51":{"start":{"line":160,"column":8},"end":{"line":160,"column":33},"skip":true},"52":{"start":{"line":161,"column":8},"end":{"line":161,"column":37},"skip":true},"53":{"start":{"line":162,"column":8},"end":{"line":162,"column":35},"skip":true},"54":{"start":{"line":164,"column":8},"end":{"line":164,"column":50},"skip":true},"55":{"start":{"line":166,"column":8},"end":{"line":256,"column":2},"skip":true},"56":{"start":{"line":258,"column":8},"end":{"line":286,"column":9},"skip":true},"57":{"start":{"line":259,"column":12},"end":{"line":269,"column":14},"skip":true},"58":{"start":{"line":271,"column":12},"end":{"line":285,"column":19},"skip":true},"59":{"start":{"line":274,"column":20},"end":{"line":274,"column":35},"skip":true},"60":{"start":{"line":275,"column":20},"end":{"line":284,"column":21},"skip":true},"61":{"start":{"line":277,"column":24},"end":{"line":277,"column":64},"skip":true},"62":{"start":{"line":279,"column":24},"end":{"line":279,"column":40},"skip":true},"63":{"start":{"line":281,"column":24},"end":{"line":281,"column":40},"skip":true},"64":{"start":{"line":283,"column":24},"end":{"line":283,"column":39},"skip":true},"65":{"start":{"line":288,"column":8},"end":{"line":290,"column":9},"skip":true},"66":{"start":{"line":289,"column":12},"end":{"line":289,"column":18},"skip":true},"67":{"start":{"line":291,"column":8},"end":{"line":293,"column":54},"skip":true},"68":{"start":{"line":296,"column":8},"end":{"line":301,"column":37},"skip":true},"69":{"start":{"line":303,"column":8},"end":{"line":303,"column":82},"skip":true},"70":{"start":{"line":306,"column":8},"end":{"line":308,"column":9},"skip":true},"71":{"start":{"line":307,"column":12},"end":{"line":307,"column":82},"skip":true},"72":{"start":{"line":310,"column":8},"end":{"line":312,"column":9},"skip":true},"73":{"start":{"line":311,"column":12},"end":{"line":311,"column":18},"skip":true},"74":{"start":{"line":313,"column":8},"end":{"line":313,"column":54},"skip":true},"75":{"start":{"line":314,"column":8},"end":{"line":314,"column":69},"skip":true},"76":{"start":{"line":315,"column":8},"end":{"line":323,"column":36},"skip":true},"77":{"start":{"line":316,"column":12},"end":{"line":316,"column":61},"skip":true},"78":{"start":{"line":317,"column":12},"end":{"line":320,"column":13},"skip":true},"79":{"start":{"line":318,"column":16},"end":{"line":318,"column":75},"skip":true},"80":{"start":{"line":319,"column":16},"end":{"line":319,"column":23},"skip":true},"81":{"start":{"line":321,"column":12},"end":{"line":321,"column":38},"skip":true},"82":{"start":{"line":322,"column":12},"end":{"line":322,"column":27},"skip":true},"83":{"start":{"line":324,"column":8},"end":{"line":324,"column":14},"skip":true}},"branchMap":{"1":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":23},"end":{"line":39,"column":62}},{"start":{"line":40,"column":20},"end":{"line":40,"column":70}},{"start":{"line":41,"column":20},"end":{"line":41,"column":71}},{"start":{"line":42,"column":20},"end":{"line":42,"column":29}}]},"2":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":23},"end":{"line":44,"column":37}},{"start":{"line":45,"column":20},"end":{"line":45,"column":61}},{"start":{"line":46,"column":20},"end":{"line":46,"column":70}},{"start":{"line":47,"column":20},"end":{"line":47,"column":26}}]},"3":{"line":51,"type":"cond-expr","locations":[{"start":{"line":52,"column":14},"end":{"line":52,"column":20}},{"start":{"line":53,"column":14},"end":{"line":53,"column":20}}]},"4":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":16},"end":{"line":55,"column":44}},{"start":{"line":55,"column":49},"end":{"line":57,"column":43}}]},"5":{"line":55,"type":"cond-expr","locations":[{"start":{"line":56,"column":14},"end":{"line":56,"column":54}},{"start":{"line":57,"column":14},"end":{"line":57,"column":43}}]},"6":{"line":61,"type":"switch","locations":[{"start":{"line":68,"column":4},"end":{"line":150,"column":14},"skip":true},{"start":{"line":156,"column":4},"end":{"line":324,"column":14},"skip":true}]},"7":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true},{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true}]},"8":{"line":70,"type":"binary-expr","locations":[{"start":{"line":70,"column":16},"end":{"line":70,"column":22},"skip":true},{"start":{"line":70,"column":27},"end":{"line":70,"column":32},"skip":true},{"start":{"line":71,"column":20},"end":{"line":71,"column":39},"skip":true},{"start":{"line":72,"column":20},"end":{"line":72,"column":49},"skip":true},{"start":{"line":73,"column":20},"end":{"line":73,"column":58},"skip":true},{"start":{"line":74,"column":20},"end":{"line":74,"column":69},"skip":true}]},"9":{"line":79,"type":"switch","locations":[{"start":{"line":80,"column":20},"end":{"line":80,"column":33},"skip":true},{"start":{"line":81,"column":20},"end":{"line":83,"column":30},"skip":true},{"start":{"line":84,"column":20},"end":{"line":85,"column":49},"skip":true}]},"10":{"line":89,"type":"switch","locations":[{"start":{"line":90,"column":12},"end":{"line":103,"column":22},"skip":true},{"start":{"line":105,"column":12},"end":{"line":106,"column":22},"skip":true}]},"11":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":20},"end":{"line":89,"column":25},"skip":true},{"start":{"line":89,"column":29},"end":{"line":89,"column":48},"skip":true},{"start":{"line":89,"column":52},"end":{"line":89,"column":74},"skip":true}]},"12":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true},{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true}]},"13":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true},{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true}]},"14":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":16},"end":{"line":108,"column":61},"skip":true},{"start":{"line":108,"column":66},"end":{"line":108,"column":72},"skip":true},{"start":{"line":108,"column":77},"end":{"line":108,"column":82},"skip":true},{"start":{"line":109,"column":20},"end":{"line":109,"column":39},"skip":true},{"start":{"line":110,"column":20},"end":{"line":110,"column":49},"skip":true},{"start":{"line":111,"column":20},"end":{"line":111,"column":58},"skip":true},{"start":{"line":112,"column":20},"end":{"line":112,"column":68},"skip":true}]},"15":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true},{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true}]},"16":{"line":134,"type":"cond-expr","locations":[{"start":{"line":135,"column":26},"end":{"line":135,"column":29},"skip":true},{"start":{"line":136,"column":26},"end":{"line":136,"column":54},"skip":true}]},"17":{"line":164,"type":"binary-expr","locations":[{"start":{"line":164,"column":27},"end":{"line":164,"column":43},"skip":true},{"start":{"line":164,"column":47},"end":{"line":164,"column":49},"skip":true}]},"18":{"line":258,"type":"if","locations":[{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true},{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true}]},"19":{"line":275,"type":"switch","locations":[{"start":{"line":276,"column":20},"end":{"line":277,"column":64},"skip":true},{"start":{"line":278,"column":20},"end":{"line":279,"column":40},"skip":true},{"start":{"line":280,"column":20},"end":{"line":281,"column":40},"skip":true},{"start":{"line":282,"column":20},"end":{"line":283,"column":39},"skip":true}]},"20":{"line":288,"type":"if","locations":[{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true},{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true}]},"21":{"line":288,"type":"binary-expr","locations":[{"start":{"line":288,"column":12},"end":{"line":288,"column":40},"skip":true},{"start":{"line":288,"column":44},"end":{"line":288,"column":67},"skip":true}]},"22":{"line":292,"type":"binary-expr","locations":[{"start":{"line":292,"column":12},"end":{"line":292,"column":50},"skip":true},{"start":{"line":293,"column":12},"end":{"line":293,"column":53},"skip":true}]},"23":{"line":297,"type":"binary-expr","locations":[{"start":{"line":297,"column":12},"end":{"line":297,"column":68},"skip":true},{"start":{"line":298,"column":12},"end":{"line":301,"column":36},"skip":true}]},"24":{"line":303,"type":"binary-expr","locations":[{"start":{"line":303,"column":43},"end":{"line":303,"column":75},"skip":true},{"start":{"line":303,"column":79},"end":{"line":303,"column":81},"skip":true}]},"25":{"line":306,"type":"if","locations":[{"start":{"line":306,"column":8},"end":{"line":306,"column":8},"skip":true},{"start":{"line":306,"column":8},"end":{"line":306,"column":8},"skip":true}]},"26":{"line":310,"type":"if","locations":[{"start":{"line":310,"column":8},"end":{"line":310,"column":8},"skip":true},{"start":{"line":310,"column":8},"end":{"line":310,"column":8},"skip":true}]},"27":{"line":313,"type":"binary-expr","locations":[{"start":{"line":313,"column":27},"end":{"line":313,"column":43},"skip":true},{"start":{"line":313,"column":47},"end":{"line":313,"column":53},"skip":true}]},"28":{"line":317,"type":"if","locations":[{"start":{"line":317,"column":12},"end":{"line":317,"column":12},"skip":true},{"start":{"line":317,"column":12},"end":{"line":317,"column":12},"skip":true}]}},"code":["/*","example.js","","quickstart example","","instruction","    1. save this script as example.js","    2. run the shell command:","        $ npm install npmtest-flightplan && PORT=8081 node example.js","    3. play with the browser-demo on http://127.0.0.1:8081","*/","","","","/* istanbul instrument in package npmtest_flightplan */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - init-before","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || (local.modeJs === 'browser'","            ? local.global.utility2_npmtest_flightplan","            : global.utility2_moduleExports);","        // export local","        local.global.local = local;","    }());","    switch (local.modeJs) {","","","","    // init-after","    // run browser js-env code - init-after","    /* istanbul ignore next */","    case 'browser':","        local.testRunBrowser = function (event) {","            if (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('onreset'))) {","                // reset output","                Array.from(","                    document.querySelectorAll('body > .resettable')","                ).forEach(function (element) {","                    switch (element.tagName) {","                    case 'INPUT':","                    case 'TEXTAREA':","                        element.value = '';","                        break;","                    default:","                        element.textContent = '';","                    }","                });","            }","            switch (event && event.currentTarget && event.currentTarget.id) {","            case 'testRunButton1':","                // show tests","                if (document.querySelector('#testReportDiv1').style.display === 'none') {","                    document.querySelector('#testReportDiv1').style.display = 'block';","                    document.querySelector('#testRunButton1').textContent =","                        'hide internal test';","                    local.modeTest = true;","                    local.testRunDefault(local);","                // hide tests","                } else {","                    document.querySelector('#testReportDiv1').style.display = 'none';","                    document.querySelector('#testRunButton1').textContent = 'run internal test';","                }","                break;","            // custom-case","            default:","                break;","            }","            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('oneval')))) {","                // try to eval input-code","                try {","                    /*jslint evil: true*/","                    eval(document.querySelector('#inputTextareaEval1').value);","                } catch (errorCaught) {","                    console.error(errorCaught);","                }","            }","        };","        // log stderr and stdout to #outputTextareaStdout1","        ['error', 'log'].forEach(function (key) {","            console[key + '_original'] = console[key];","            console[key] = function () {","                var element;","                console[key + '_original'].apply(console, arguments);","                element = document.querySelector('#outputTextareaStdout1');","                if (!element) {","                    return;","                }","                // append text to #outputTextareaStdout1","                element.value += Array.from(arguments).map(function (arg) {","                    return typeof arg === 'string'","                        ? arg","                        : JSON.stringify(arg, null, 4);","                }).join(' ') + '\\n';","                // scroll textarea to bottom","                element.scrollTop = element.scrollHeight;","            };","        });","        // init event-handling","        ['change', 'click', 'keyup'].forEach(function (event) {","            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {","                element.addEventListener(event, local.testRunBrowser);","            });","        });","        // run tests","        local.testRunBrowser();","        break;","","","","    // run node js-env code - init-after","    /* istanbul ignore next */","    case 'node':","        // export local","        module.exports = local;","        // require modules","        local.fs = require('fs');","        local.http = require('http');","        local.url = require('url');","        // init assets","        local.assetsDict = local.assetsDict || {};","        /* jslint-ignore-begin */","        local.assetsDict['/assets.index.template.html'] = '\\","<!doctype html>\\n\\","<html lang=\"en\">\\n\\","<head>\\n\\","<meta charset=\"UTF-8\">\\n\\","<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\","<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\","<style>\\n\\","/*csslint\\n\\","    box-sizing: false,\\n\\","    universal-selector: false\\n\\","*/\\n\\","* {\\n\\","    box-sizing: border-box;\\n\\","}\\n\\","body {\\n\\","    background: #dde;\\n\\","    font-family: Arial, Helvetica, sans-serif;\\n\\","    margin: 2rem;\\n\\","}\\n\\","body > * {\\n\\","    margin-bottom: 1rem;\\n\\","}\\n\\",".utility2FooterDiv {\\n\\","    margin-top: 20px;\\n\\","    text-align: center;\\n\\","}\\n\\","</style>\\n\\","<style>\\n\\","/*csslint\\n\\","*/\\n\\","textarea {\\n\\","    font-family: monospace;\\n\\","    height: 10rem;\\n\\","    width: 100%;\\n\\","}\\n\\","textarea[readonly] {\\n\\","    background: #ddd;\\n\\","}\\n\\","</style>\\n\\","</head>\\n\\","<body>\\n\\","<!-- utility2-comment\\n\\","<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\","utility2-comment -->\\n\\","<h1>\\n\\","<!-- utility2-comment\\n\\","    <a\\n\\","        {{#if env.npm_package_homepage}}\\n\\","        href=\"{{env.npm_package_homepage}}\"\\n\\","        {{/if env.npm_package_homepage}}\\n\\","        target=\"_blank\"\\n\\","    >\\n\\","utility2-comment -->\\n\\","        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\","<!-- utility2-comment\\n\\","    </a>\\n\\","utility2-comment -->\\n\\","</h1>\\n\\","<h3>{{env.npm_package_description}}</h3>\\n\\","<!-- utility2-comment\\n\\","<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\","<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\","<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\","utility2-comment -->\\n\\","\\n\\","\\n\\","\\n\\","<label>stderr and stdout</label>\\n\\","<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\","<!-- utility2-comment\\n\\","{{#if isRollup}}\\n\\","<script src=\"assets.app.js\"></script>\\n\\","{{#unless isRollup}}\\n\\","utility2-comment -->\\n\\","<script src=\"assets.utility2.rollup.js\"></script>\\n\\","<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\","<script src=\"assets.npmtest_flightplan.rollup.js\"></script>\\n\\","<script src=\"assets.example.js\"></script>\\n\\","<script src=\"assets.test.js\"></script>\\n\\","<!-- utility2-comment\\n\\","{{/if isRollup}}\\n\\","utility2-comment -->\\n\\","<div class=\"utility2FooterDiv\">\\n\\","    [ this app was created with\\n\\","    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\","    ]\\n\\","</div>\\n\\","</body>\\n\\","</html>\\n\\","';","        /* jslint-ignore-end */","        if (local.templateRender) {","            local.assetsDict['/'] = local.templateRender(","                local.assetsDict['/assets.index.template.html'],","                {","                    env: local.objectSetDefault(local.env, {","                        npm_package_description: 'the greatest app in the world!',","                        npm_package_name: 'my-app',","                        npm_package_nameAlias: 'my_app',","                        npm_package_version: '0.0.1'","                    })","                }","            );","        } else {","            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']","                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {","                    // jslint-hack","                    String(match0);","                    switch (match1) {","                    case 'npm_package_description':","                        return 'the greatest app in the world!';","                    case 'npm_package_name':","                        return 'my-app';","                    case 'npm_package_nameAlias':","                        return 'my_app';","                    case 'npm_package_version':","                        return '0.0.1';","                    }","                });","        }","        // run the cli","        if (local.global.utility2_rollup || module !== require.main) {","            break;","        }","        local.assetsDict['/assets.example.js'] =","            local.assetsDict['/assets.example.js'] ||","            local.fs.readFileSync(__filename, 'utf8');","        // bug-workaround - long $npm_package_buildCustomOrg","        /* jslint-ignore-begin */","        local.assetsDict['/assets.npmtest_flightplan.rollup.js'] =","            local.assetsDict['/assets.npmtest_flightplan.rollup.js'] ||","            local.fs.readFileSync(","                local.npmtest_flightplan.__dirname + '/lib.npmtest_flightplan.js',","                'utf8'","            ).replace((/^#!/), '//');","        /* jslint-ignore-end */","        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';","        // if $npm_config_timeout_exit exists,","        // then exit this process after $npm_config_timeout_exit ms","        if (Number(process.env.npm_config_timeout_exit)) {","            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));","        }","        // start server","        if (local.global.utility2_serverHttp1) {","            break;","        }","        process.env.PORT = process.env.PORT || '8081';","        console.error('server starting on port ' + process.env.PORT);","        local.http.createServer(function (request, response) {","            request.urlParsed = local.url.parse(request.url);","            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {","                response.end(local.assetsDict[request.urlParsed.pathname]);","                return;","            }","            response.statusCode = 404;","            response.end();","        }).listen(process.env.PORT);","        break;","    }","}());",""],"l":{"26":2,"28":2,"33":2,"35":2,"37":2,"38":2,"39":2,"44":1,"51":2,"55":2,"59":2,"61":2,"69":1,"70":2,"76":2,"79":2,"82":2,"83":2,"85":1,"89":2,"92":1,"93":1,"94":1,"96":1,"97":1,"100":1,"101":1,"103":1,"106":1,"108":2,"114":1,"116":1,"118":1,"123":1,"124":2,"125":2,"126":3,"127":3,"128":3,"129":3,"130":1,"133":3,"134":3,"139":3,"143":1,"144":3,"145":1,"149":1,"150":1,"158":1,"160":1,"161":1,"162":1,"164":1,"166":1,"258":1,"259":1,"271":1,"274":6,"275":6,"277":1,"279":2,"281":1,"283":2,"288":1,"289":1,"291":1,"296":1,"303":1,"306":1,"307":1,"310":1,"311":1,"313":1,"314":1,"315":1,"316":1,"317":1,"318":1,"319":1,"321":1,"322":1,"324":1}},"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/index.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":34}}},"branchMap":{},"code":["module.exports = require('./lib');",""],"l":{"1":1}},"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/index.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":1,"19":0,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":1,"30":0,"31":0,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":1,"77":0,"78":1,"79":0,"80":1,"81":0,"82":0,"83":0,"84":0,"85":0,"86":1,"87":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0]},"f":{"1":0,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"fnMap":{"1":{"name":"_setupFlight","line":13,"loc":{"start":{"line":13,"column":0},"end":{"line":13,"column":43}}},"2":{"name":"Flightplan","line":109,"loc":{"start":{"line":109,"column":0},"end":{"line":109,"column":22}}},"3":{"name":"(anonymous_3)","line":115,"loc":{"start":{"line":115,"column":23},"end":{"line":115,"column":34}}},"4":{"name":"(anonymous_4)","line":119,"loc":{"start":{"line":119,"column":34},"end":{"line":119,"column":48}}},"5":{"name":"(anonymous_5)","line":283,"loc":{"start":{"line":283,"column":30},"end":{"line":283,"column":61}}},"6":{"name":"(anonymous_6)","line":310,"loc":{"start":{"line":310,"column":29},"end":{"line":310,"column":53}}},"7":{"name":"(anonymous_7)","line":333,"loc":{"start":{"line":333,"column":30},"end":{"line":333,"column":54}}},"8":{"name":"(anonymous_8)","line":339,"loc":{"start":{"line":339,"column":27},"end":{"line":339,"column":59}}},"9":{"name":"(anonymous_9)","line":357,"loc":{"start":{"line":357,"column":37},"end":{"line":357,"column":49}}},"10":{"name":"(anonymous_10)","line":380,"loc":{"start":{"line":380,"column":12},"end":{"line":380,"column":23}}},"11":{"name":"(anonymous_11)","line":384,"loc":{"start":{"line":384,"column":27},"end":{"line":384,"column":38}}},"12":{"name":"(anonymous_12)","line":387,"loc":{"start":{"line":387,"column":23},"end":{"line":387,"column":40}}},"13":{"name":"(anonymous_13)","line":411,"loc":{"start":{"line":411,"column":39},"end":{"line":411,"column":54}}},"14":{"name":"(anonymous_14)","line":425,"loc":{"start":{"line":425,"column":20},"end":{"line":425,"column":32}}},"15":{"name":"(anonymous_15)","line":446,"loc":{"start":{"line":446,"column":29},"end":{"line":446,"column":47}}},"16":{"name":"(anonymous_16)","line":450,"loc":{"start":{"line":450,"column":40},"end":{"line":450,"column":51}}},"17":{"name":"(anonymous_17)","line":454,"loc":{"start":{"line":454,"column":38},"end":{"line":454,"column":49}}},"18":{"name":"(anonymous_18)","line":455,"loc":{"start":{"line":455,"column":30},"end":{"line":455,"column":50}}},"19":{"name":"(anonymous_19)","line":456,"loc":{"start":{"line":456,"column":20},"end":{"line":456,"column":35}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":9,"column":29}},"2":{"start":{"line":11,"column":0},"end":{"line":11,"column":29}},"3":{"start":{"line":13,"column":0},"end":{"line":26,"column":1}},"4":{"start":{"line":14,"column":2},"end":{"line":14,"column":12}},"5":{"start":{"line":16,"column":2},"end":{"line":23,"column":3}},"6":{"start":{"line":17,"column":4},"end":{"line":17,"column":24}},"7":{"start":{"line":18,"column":9},"end":{"line":23,"column":3}},"8":{"start":{"line":19,"column":4},"end":{"line":19,"column":22}},"9":{"start":{"line":21,"column":4},"end":{"line":21,"column":27}},"10":{"start":{"line":22,"column":4},"end":{"line":22,"column":19}},"11":{"start":{"line":25,"column":2},"end":{"line":25,"column":46}},"12":{"start":{"line":109,"column":0},"end":{"line":124,"column":1}},"13":{"start":{"line":110,"column":2},"end":{"line":110,"column":21}},"14":{"start":{"line":111,"column":2},"end":{"line":111,"column":21}},"15":{"start":{"line":113,"column":2},"end":{"line":113,"column":35}},"16":{"start":{"line":115,"column":2},"end":{"line":117,"column":5}},"17":{"start":{"line":116,"column":4},"end":{"line":116,"column":75}},"18":{"start":{"line":119,"column":2},"end":{"line":123,"column":5}},"19":{"start":{"line":120,"column":4},"end":{"line":120,"column":76}},"20":{"start":{"line":122,"column":4},"end":{"line":122,"column":20}},"21":{"start":{"line":283,"column":0},"end":{"line":291,"column":2}},"22":{"start":{"line":284,"column":2},"end":{"line":286,"column":3}},"23":{"start":{"line":285,"column":4},"end":{"line":285,"column":30}},"24":{"start":{"line":288,"column":2},"end":{"line":288,"column":71}},"25":{"start":{"line":290,"column":2},"end":{"line":290,"column":14}},"26":{"start":{"line":310,"column":0},"end":{"line":314,"column":2}},"27":{"start":{"line":311,"column":2},"end":{"line":311,"column":69}},"28":{"start":{"line":313,"column":2},"end":{"line":313,"column":14}},"29":{"start":{"line":333,"column":0},"end":{"line":337,"column":2}},"30":{"start":{"line":334,"column":2},"end":{"line":334,"column":70}},"31":{"start":{"line":336,"column":2},"end":{"line":336,"column":14}},"32":{"start":{"line":339,"column":0},"end":{"line":433,"column":2}},"33":{"start":{"line":340,"column":2},"end":{"line":340,"column":30}},"34":{"start":{"line":341,"column":2},"end":{"line":341,"column":26}},"35":{"start":{"line":343,"column":2},"end":{"line":345,"column":3}},"36":{"start":{"line":344,"column":4},"end":{"line":344,"column":34}},"37":{"start":{"line":347,"column":2},"end":{"line":349,"column":3}},"38":{"start":{"line":348,"column":4},"end":{"line":348,"column":63}},"39":{"start":{"line":351,"column":2},"end":{"line":354,"column":3}},"40":{"start":{"line":352,"column":4},"end":{"line":353,"column":62}},"41":{"start":{"line":357,"column":2},"end":{"line":359,"column":5}},"42":{"start":{"line":358,"column":4},"end":{"line":358,"column":40}},"43":{"start":{"line":361,"column":2},"end":{"line":366,"column":3}},"44":{"start":{"line":362,"column":4},"end":{"line":362,"column":75}},"45":{"start":{"line":364,"column":4},"end":{"line":364,"column":20}},"46":{"start":{"line":365,"column":4},"end":{"line":365,"column":11}},"47":{"start":{"line":368,"column":2},"end":{"line":368,"column":49}},"48":{"start":{"line":370,"column":2},"end":{"line":374,"column":4}},"49":{"start":{"line":376,"column":2},"end":{"line":376,"column":53}},"50":{"start":{"line":378,"column":2},"end":{"line":378,"column":18}},"51":{"start":{"line":380,"column":2},"end":{"line":432,"column":11}},"52":{"start":{"line":381,"column":4},"end":{"line":418,"column":5}},"53":{"start":{"line":383,"column":6},"end":{"line":405,"column":7}},"54":{"start":{"line":384,"column":8},"end":{"line":392,"column":10}},"55":{"start":{"line":385,"column":10},"end":{"line":385,"column":36}},"56":{"start":{"line":387,"column":10},"end":{"line":389,"column":22}},"57":{"start":{"line":388,"column":12},"end":{"line":388,"column":34}},"58":{"start":{"line":391,"column":10},"end":{"line":391,"column":24}},"59":{"start":{"line":394,"column":8},"end":{"line":394,"column":59}},"60":{"start":{"line":396,"column":8},"end":{"line":396,"column":43}},"61":{"start":{"line":398,"column":8},"end":{"line":400,"column":9}},"62":{"start":{"line":399,"column":10},"end":{"line":399,"column":29}},"63":{"start":{"line":402,"column":8},"end":{"line":402,"column":30}},"64":{"start":{"line":407,"column":6},"end":{"line":409,"column":7}},"65":{"start":{"line":408,"column":8},"end":{"line":408,"column":38}},"66":{"start":{"line":411,"column":6},"end":{"line":417,"column":9}},"67":{"start":{"line":412,"column":8},"end":{"line":414,"column":9}},"68":{"start":{"line":413,"column":10},"end":{"line":413,"column":43}},"69":{"start":{"line":416,"column":8},"end":{"line":416,"column":20}},"70":{"start":{"line":420,"column":4},"end":{"line":420,"column":54}},"71":{"start":{"line":423,"column":4},"end":{"line":423,"column":29}},"72":{"start":{"line":425,"column":4},"end":{"line":427,"column":7}},"73":{"start":{"line":426,"column":6},"end":{"line":426,"column":40}},"74":{"start":{"line":429,"column":4},"end":{"line":429,"column":24}},"75":{"start":{"line":431,"column":4},"end":{"line":431,"column":78}},"76":{"start":{"line":446,"column":0},"end":{"line":448,"column":2}},"77":{"start":{"line":447,"column":2},"end":{"line":447,"column":65}},"78":{"start":{"line":450,"column":0},"end":{"line":452,"column":2}},"79":{"start":{"line":451,"column":2},"end":{"line":451,"column":36}},"80":{"start":{"line":454,"column":0},"end":{"line":464,"column":2}},"81":{"start":{"line":455,"column":2},"end":{"line":463,"column":9}},"82":{"start":{"line":456,"column":4},"end":{"line":460,"column":7}},"83":{"start":{"line":457,"column":6},"end":{"line":459,"column":7}},"84":{"start":{"line":458,"column":8},"end":{"line":458,"column":26}},"85":{"start":{"line":462,"column":4},"end":{"line":462,"column":18}},"86":{"start":{"line":466,"column":0},"end":{"line":466,"column":32}},"87":{"start":{"line":467,"column":0},"end":{"line":467,"column":26}}},"branchMap":{"1":{"line":16,"type":"if","locations":[{"start":{"line":16,"column":2},"end":{"line":16,"column":2}},{"start":{"line":16,"column":2},"end":{"line":16,"column":2}}]},"2":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":9},"end":{"line":18,"column":9}},{"start":{"line":18,"column":9},"end":{"line":18,"column":9}}]},"3":{"line":120,"type":"cond-expr","locations":[{"start":{"line":120,"column":51},"end":{"line":120,"column":62}},{"start":{"line":120,"column":65},"end":{"line":120,"column":74}}]},"4":{"line":284,"type":"if","locations":[{"start":{"line":284,"column":2},"end":{"line":284,"column":2}},{"start":{"line":284,"column":2},"end":{"line":284,"column":2}}]},"5":{"line":284,"type":"binary-expr","locations":[{"start":{"line":284,"column":5},"end":{"line":284,"column":26}},{"start":{"line":284,"column":30},"end":{"line":284,"column":55}}]},"6":{"line":340,"type":"binary-expr","locations":[{"start":{"line":340,"column":9},"end":{"line":340,"column":13}},{"start":{"line":340,"column":17},"end":{"line":340,"column":29}}]},"7":{"line":341,"type":"binary-expr","locations":[{"start":{"line":341,"column":12},"end":{"line":341,"column":19}},{"start":{"line":341,"column":23},"end":{"line":341,"column":25}}]},"8":{"line":343,"type":"if","locations":[{"start":{"line":343,"column":2},"end":{"line":343,"column":2}},{"start":{"line":343,"column":2},"end":{"line":343,"column":2}}]},"9":{"line":347,"type":"if","locations":[{"start":{"line":347,"column":2},"end":{"line":347,"column":2}},{"start":{"line":347,"column":2},"end":{"line":347,"column":2}}]},"10":{"line":351,"type":"if","locations":[{"start":{"line":351,"column":2},"end":{"line":351,"column":2}},{"start":{"line":351,"column":2},"end":{"line":351,"column":2}}]},"11":{"line":361,"type":"if","locations":[{"start":{"line":361,"column":2},"end":{"line":361,"column":2}},{"start":{"line":361,"column":2},"end":{"line":361,"column":2}}]},"12":{"line":381,"type":"if","locations":[{"start":{"line":381,"column":4},"end":{"line":381,"column":4}},{"start":{"line":381,"column":4},"end":{"line":381,"column":4}}]},"13":{"line":383,"type":"if","locations":[{"start":{"line":383,"column":6},"end":{"line":383,"column":6}},{"start":{"line":383,"column":6},"end":{"line":383,"column":6}}]},"14":{"line":398,"type":"if","locations":[{"start":{"line":398,"column":8},"end":{"line":398,"column":8}},{"start":{"line":398,"column":8},"end":{"line":398,"column":8}}]},"15":{"line":407,"type":"if","locations":[{"start":{"line":407,"column":6},"end":{"line":407,"column":6}},{"start":{"line":407,"column":6},"end":{"line":407,"column":6}}]},"16":{"line":412,"type":"if","locations":[{"start":{"line":412,"column":8},"end":{"line":412,"column":8}},{"start":{"line":412,"column":8},"end":{"line":412,"column":8}}]},"17":{"line":447,"type":"binary-expr","locations":[{"start":{"line":447,"column":32},"end":{"line":447,"column":39}},{"start":{"line":447,"column":43},"end":{"line":447,"column":63}}]},"18":{"line":457,"type":"if","locations":[{"start":{"line":457,"column":6},"end":{"line":457,"column":6}},{"start":{"line":457,"column":6},"end":{"line":457,"column":6}}]}},"code":["var format = require('util').format","  , extend = require('util-extend')","  , Fiber = require('fibers')","  , Future = require('fibers/future')","  , logger = require('./logger')()","  , errors = require('./errors')","  , flight = require('./flight')","  , prettyTime = require('pretty-hrtime')","  , chalk = require('chalk');","","var DEFAULT_TASK = 'default';","","function _setupFlight(type, tasksOrFn, fn) {","  var tasks;","","  if(typeof tasksOrFn === 'string') {","    tasks = [tasksOrFn];","  } else if(Array.isArray(tasksOrFn)) {","    tasks = tasksOrFn;","  } else {","    tasks = [DEFAULT_TASK];","    fn = tasksOrFn;","  }","","  return { type: type, tasks: tasks, fn: fn };","}","","/**"," * A flightplan is a set of subsequent flights to be executed on one or more"," * hosts. Configuration is handled with the `target()` method."," *"," * ```javascript"," * var plan = require('flightplan');"," * ```"," *"," * ### Flights"," * A flight is a set of commands to be executed on one or more hosts. There are"," * two types of flights:"," *"," * #### Local flights"," *"," * Commands in local flights are executed on the **localhost**."," *"," * ```javascript"," * plan.local(function(transport) {"," *   transport.hostname(); // prints the hostname of localhost"," * });"," * ```"," *"," * #### Remote flights"," *"," * Commands in remote flights are executed in **parallel** against remote hosts."," *"," * ```javascript"," * plan.remote(function(transport) {"," *   transport.hostname(); // prints the hostname(s) of the remote host(s)"," * });"," * ```"," *"," * You can define multiple flights of each type. They will be executed in the"," * order of their definition. If a previous flight failed, all subsequent"," * flights won't get executed. For more information about what it means for"," * a flight to fail, see the section about `Transport`."," *"," * ```javascript"," * // executed first"," * plan.local(function(transport) {});"," *"," * // executed if first flight succeeded"," * plan.remote(function(transport) {});"," *"," * // executed if second flight succeeded"," * plan.local(function(transport) {});"," *"," * // ..."," * ```"," *"," * ### Tasks"," * Flightplan supports optional tasks to run a subset of flights."," *"," * ```javascript"," * // fly deploy:<target>"," * plan.local('deploy', function(transport) {});"," *"," * // fly build:<target>"," * plan.local('build', function(transport) {});"," *"," * // fly deploy:<target> or..."," * // fly build:<target>"," * plan.local(['deploy', 'build'], function(transport) {});"," * plan.remote(['deploy', 'build'], function(transport) {});"," * ```"," *"," * If no task is specified it's implicitly set to \"default\". Therefore,"," * `fly <target>` is the same as `fly default:<target>`."," *"," * ```javascript"," * // fly <target>"," * plan.local(function(transport) {});"," * // is the same as..."," * plan.local('default', function(transport) {});"," * // \"default\" + other tasks:"," * plan.remote(['default', 'deploy', 'build'], function(transport) {});"," * ```"," *"," * @class Flightplan"," * @return {Object} flightplan"," */","function Flightplan() {","  this._targets = {};","  this._flights = [];","","  this.runtime = Object.freeze({});","","  process.on('SIGINT', function() {","    throw new errors.ProcessInterruptedError('Flightplan was interrupted');","  });","","  process.on('uncaughtException', function(err) {","    logger.error(err instanceof errors.BaseError ? err.message : err.stack);","","    process.exit(1);","  });","}","","/**"," * Configure the flightplan's targets with `target()`. Without a"," * proper setup you can't do remote flights which require at"," * least one remote host. Each target consists of one or more hosts."," *"," * Values in the hosts section are passed directly to the `connect()`"," * method of [mscdex/ssh2](https://github.com/mscdex/ssh2#connection-methods)"," * with one exception: `privateKey` needs to be passed as a string"," * containing the path to the keyfile instead of the key itself."," *"," * ```javascript"," * // run with `fly staging`"," * plan.target('staging', {"," *   // see: https://github.com/mscdex/ssh2#connection-methods"," *   host: 'staging.example.com',"," *   username: 'pstadler',"," *   agent: process.env.SSH_AUTH_SOCK"," * });"," *"," * // run with `fly production`"," * plan.target('production', ["," *   {"," *     host: 'www1.example.com',"," *     username: 'pstadler',"," *     agent: process.env.SSH_AUTH_SOCK"," *   },"," *   {"," *     host: 'www2.example.com',"," *     username: 'pstadler',"," *     agent: process.env.SSH_AUTH_SOCK"," *   }"," * ]);"," *"," * // run with `fly dynamic-hosts`"," * plan.target('dynamic-hosts', function(done, runtime) {"," *   var AWS = require('aws-sdk');"," *   AWS.config.update({accessKeyId: '...', secretAccessKey: '...'});"," *   var ec2 = new AWS.EC2();"," *   var params = {Filters: [{Name: 'instance-state-name', Values: ['running']}]};"," *   ec2.describeInstances(params, function(err, response) {"," *     if(err) {"," *       return done(err);"," *     }"," *     var hosts = [];"," *     response.data.Reservations.forEach(function(reservation) {"," *       reservation.Instances.forEach(function(instance) {"," *         hosts.push({"," *           host: instance.PublicIpAddress,"," *           username: 'pstadler',"," *           agent: process.env.SSH_AUTH_SOCK"," *         });"," *       });"," *     });"," *     done(hosts);"," *   });"," * });"," * ```"," *"," * Usually flightplan will abort when a host is not reachable or authentication"," * fails. This can be prevented by setting a property `failsafe` to `true` on"," * any of the host configurations:"," *"," * ```javascript"," * plan.target('production', ["," *   {"," *     host: 'www1.example.com',"," *     username: 'pstadler',"," *     agent: process.env.SSH_AUTH_SOCK"," *   },"," *   {"," *     host: 'www2.example.com',"," *     username: 'pstadler',"," *     agent: process.env.SSH_AUTH_SOCK,"," *     failsafe: true // continue flightplan even if connection to www2 fails"," *   }"," * ]);"," * ```"," *"," *"," * You can override the `username` value of hosts by calling `fly` with"," * the `-u|--username` option:"," *"," * ```bash"," * fly production --username=admin"," * ```"," *"," * #### Configuring remote hosts during runtime (e.g. using AWS/EC2)"," *"," * Instead of having a static hosts configuration for a target you can configure"," * it on the fly by passing a function `fn(done)` as the second argument to"," * `target()`."," *"," * This function is exectued at the very beginning. Whatever is passed to"," * `done()` will be used for connecting to remote hosts. This can either be an"," * object or an array of objects depending on if you want to connect to one or"," * multiple hosts. Passing an `Error` object will immediately abort the current"," * flightplan."," *"," * ```javascript"," * plan.target('dynamic-hosts', function(done, runtime) {"," *   var AWS = require('aws-sdk');"," *   AWS.config.update({accessKeyId: '...', secretAccessKey: '...'});"," *   var ec2 = new AWS.EC2();"," *   var params = {Filters: [{Name: 'instance-state-name', Values: ['running']}]};"," *   ec2.describeInstances(params, function(err, response) {"," *     if(err) {"," *       return done(err);"," *     }"," *     var hosts = [];"," *     response.data.Reservations.forEach(function(reservation) {"," *       reservation.Instances.forEach(function(instance) {"," *         hosts.push({"," *           host: instance.PublicIpAddress,"," *           username: 'pstadler',"," *           agent: process.env.SSH_AUTH_SOCK"," *         });"," *       });"," *     });"," *     done(hosts);"," *   });"," * });"," * ```"," *"," * #### Defining and using properties depending on the target"," *"," * `target()` takes an optional third argument to define properties used by"," * this target. Values defined in this way can be accessed during runtime."," *"," * ```javascript"," * plan.target('staging', {...}, {"," *   webRoot: '/usr/local/www',"," *   sudoUser: 'www'"," * });"," *"," * plan.target('production', {...}, {"," *   webRoot: '/home/node',"," *   sudoUser: 'node'"," * });"," *"," * plan.remote(function(remote) {"," *   var webRoot = plan.runtime.options.webRoot;   // fly staging -> '/usr/local/www'"," *   var sudoUser = plan.runtime.options.sudoUser; // fly staging -> 'www'"," *   remote.sudo('ls -al ' + webRoot, {user: sudoUser});"," * });"," * ```"," *"," * Properties can be set and overwritten by passing them as named options to the"," *  `fly` command."," *"," * ```bash"," * $ fly staging --sudoUser=foo"," * # plan.runtime.options.sudoUser -> 'foo'"," * ```"," *"," * @method target(name, hosts[, options])"," * @return {Object} this"," */","Flightplan.prototype.target = function(name, hosts, options) {","  if(!Array.isArray(hosts) && typeof hosts === 'object') {","    hosts = extend({}, hosts); // dereference object","  }","","  this._targets[name] = { hosts: hosts, options: extend({}, options) };","","  return this;","};","","/**"," * Calling this method registers a local flight. Local flights are"," * executed on your localhost. When `fn` gets called a `Transport` object"," * is passed with the first argument."," *"," * ```javascript"," * plan.local(function(local) {"," *   local.echo('hello from your localhost.');"," * });"," * ```"," *"," * An optional first parameter of type Array or String can be passed for"," * defining the flight's task(s)."," *"," * @method local([tasks, ]fn)"," * @return {Object} this"," */","Flightplan.prototype.local = function(tasksOrFn, fn) {","  this._flights.push(_setupFlight(flight.TYPE.LOCAL, tasksOrFn, fn));","","  return this;","};","","/**"," * Register a remote flight. Remote flights are executed on the current"," * target's remote hosts defined with `target()`. When `fn` gets called"," * a `Transport` object is passed with the first argument."," *"," * ```javascript"," * plan.remote(function(remote) {"," *   remote.echo('hello from the remote host.');"," * });"," * ```"," *"," * An optional first parameter of type Array or String can be passed for"," * defining the flight's task(s)."," *"," * @method remote([tasks, ]fn)"," * @return {Object} this"," */","Flightplan.prototype.remote = function(tasksOrFn, fn) {","  this._flights.push(_setupFlight(flight.TYPE.REMOTE, tasksOrFn, fn));","","  return this;","};","","Flightplan.prototype.run = function(task, target, options) {","  task = task || DEFAULT_TASK;","  options = options || {};","","  if(options.color !== undefined) {","    chalk.enabled = options.color;","  }","","  if(!target) {","    throw new errors.InvalidTargetError('No target specified');","  }","","  if(Object.keys(this._targets).indexOf(target) === -1) {","    throw new errors.InvalidTargetError(","                format(\"'%s' is not a valid target\", target));","  }","","  // Filter flights to be executed","  var flights = this._flights.filter(function(f) {","    return f.tasks.indexOf(task) !== -1;","  });","","  if(flights.length === 0) {","    logger.warn(format(\"There is no work to be done for task '%s'\", task));","","    process.exit(1);","    return; // for testing","  }","","  var config = extend({}, this._targets[target]);","","  var context = {","    options: extend(config.options, options),","    target: target,","    task: task","  };","","  logger.info(format('Running %s:%s', task, target));","","  var self = this;","","  new Fiber(function() {","    if(config.hosts) {","      // late configuration","      if(typeof config.hosts === 'function') {","        var dynamicHosts = function() {","          var future = new Future();","","          config.hosts(function(result) {","            future.return(result);","          }, context);","","          return future;","        };","","        logger.info('Running dynamic hosts configuration');","","        var result = dynamicHosts().wait();","","        if(result instanceof Error) {","          self.abort(result);","        }","","        config.hosts = result;","        // FIXME: Debug flag is not set at this time","        // logger.debug(format('Hosts are set to %s', config.hosts));","      }","","      if(!Array.isArray(config.hosts)) {","        config.hosts = [config.hosts];","      }","","      context.hosts = config.hosts.map(function(host) {","        if(options.username) {","          host.username = options.username;","        }","","        return host;","      });","    }","","    self.runtime = Object.freeze(extend({}, context));","","    // Execute flights","    var t = process.hrtime();","","    flights.forEach(function(f) {","      flight.run(f.type, f.fn, context);","    });","","    flight.disconnect();","","    logger.info('Flightplan finished after ' + prettyTime(process.hrtime(t)));","  }).run();","};","","/**"," * Manually abort the current flightplan and prevent any further commands and"," * flights from being executed. An optional message can be passed which"," * is displayed after the flight has been aborted."," *"," * ```javascript"," * plan.abort('Severe turbulences over the atlantic ocean!');"," * ```"," *"," * @method abort([message])"," */","Flightplan.prototype.abort = function(message) {","  throw new errors.AbortedError(message || 'Flightplan aborted');","};","","Flightplan.prototype.availableTargets = function() {","  return Object.keys(this._targets);","};","","Flightplan.prototype.availableTasks = function() {","  return this._flights.reduce(function(result, f) {","    f.tasks.forEach(function(task) {","      if(result.indexOf(task) === -1) {","        result.push(task);","      }","    });","","    return result;","  }, []);","};","","var instance = new Flightplan();","module.exports = instance;",""],"l":{"1":1,"11":1,"13":1,"14":0,"16":0,"17":0,"18":0,"19":0,"21":0,"22":0,"25":0,"109":1,"110":1,"111":1,"113":1,"115":1,"116":0,"119":1,"120":0,"122":0,"283":1,"284":0,"285":0,"288":0,"290":0,"310":1,"311":0,"313":0,"333":1,"334":0,"336":0,"339":1,"340":0,"341":0,"343":0,"344":0,"347":0,"348":0,"351":0,"352":0,"357":0,"358":0,"361":0,"362":0,"364":0,"365":0,"368":0,"370":0,"376":0,"378":0,"380":0,"381":0,"383":0,"384":0,"385":0,"387":0,"388":0,"391":0,"394":0,"396":0,"398":0,"399":0,"402":0,"407":0,"408":0,"411":0,"412":0,"413":0,"416":0,"420":0,"423":0,"425":0,"426":0,"429":0,"431":0,"446":1,"447":0,"450":1,"451":0,"454":1,"455":0,"456":0,"457":0,"458":0,"462":0,"466":1,"467":1}},"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/logger/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/logger/index.js","s":{"1":1,"2":1,"3":3,"4":3,"5":3,"6":3,"7":0,"8":3,"9":0,"10":0,"11":3,"12":0,"13":0,"14":0,"15":1,"16":0,"17":1,"18":0,"19":1,"20":0,"21":1,"22":0,"23":1,"24":0,"25":1,"26":0,"27":1,"28":0,"29":1,"30":0,"31":1,"32":0,"33":1,"34":1,"35":3},"b":{"1":[3,3],"2":[3,3],"3":[3,3],"4":[3,0],"5":[0,3]},"f":{"1":3,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":3},"fnMap":{"1":{"name":"Logger","line":3,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":25}}},"2":{"name":"(anonymous_2)","line":9,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":17}}},"3":{"name":"(anonymous_3)","line":10,"loc":{"start":{"line":10,"column":6},"end":{"line":10,"column":17}}},"4":{"name":"(anonymous_4)","line":12,"loc":{"start":{"line":12,"column":14},"end":{"line":12,"column":32}}},"5":{"name":"(anonymous_5)","line":19,"loc":{"start":{"line":19,"column":17},"end":{"line":19,"column":35}}},"6":{"name":"(anonymous_6)","line":25,"loc":{"start":{"line":25,"column":24},"end":{"line":25,"column":42}}},"7":{"name":"(anonymous_7)","line":29,"loc":{"start":{"line":29,"column":24},"end":{"line":29,"column":42}}},"8":{"name":"(anonymous_8)","line":33,"loc":{"start":{"line":33,"column":27},"end":{"line":33,"column":45}}},"9":{"name":"(anonymous_9)","line":37,"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":42}}},"10":{"name":"(anonymous_10)","line":41,"loc":{"start":{"line":41,"column":25},"end":{"line":41,"column":43}}},"11":{"name":"(anonymous_11)","line":45,"loc":{"start":{"line":45,"column":27},"end":{"line":45,"column":45}}},"12":{"name":"(anonymous_12)","line":49,"loc":{"start":{"line":49,"column":26},"end":{"line":49,"column":44}}},"13":{"name":"(anonymous_13)","line":53,"loc":{"start":{"line":53,"column":27},"end":{"line":53,"column":45}}},"14":{"name":"(anonymous_14)","line":57,"loc":{"start":{"line":57,"column":26},"end":{"line":57,"column":44}}},"15":{"name":"(anonymous_15)","line":61,"loc":{"start":{"line":61,"column":25},"end":{"line":61,"column":36}}},"16":{"name":"(anonymous_16)","line":63,"loc":{"start":{"line":63,"column":17},"end":{"line":63,"column":35}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":29}},"2":{"start":{"line":3,"column":0},"end":{"line":23,"column":1}},"3":{"start":{"line":4,"column":2},"end":{"line":4,"column":26}},"4":{"start":{"line":5,"column":2},"end":{"line":5,"column":39}},"5":{"start":{"line":6,"column":2},"end":{"line":6,"column":36}},"6":{"start":{"line":8,"column":2},"end":{"line":10,"column":69}},"7":{"start":{"line":10,"column":19},"end":{"line":10,"column":66}},"8":{"start":{"line":12,"column":2},"end":{"line":15,"column":4}},"9":{"start":{"line":13,"column":4},"end":{"line":13,"column":18}},"10":{"start":{"line":14,"column":4},"end":{"line":14,"column":48}},"11":{"start":{"line":17,"column":2},"end":{"line":22,"column":3}},"12":{"start":{"line":18,"column":4},"end":{"line":18,"column":20}},"13":{"start":{"line":19,"column":4},"end":{"line":21,"column":6}},"14":{"start":{"line":20,"column":6},"end":{"line":20,"column":37}},"15":{"start":{"line":25,"column":0},"end":{"line":27,"column":2}},"16":{"start":{"line":26,"column":2},"end":{"line":26,"column":33}},"17":{"start":{"line":29,"column":0},"end":{"line":31,"column":2}},"18":{"start":{"line":30,"column":2},"end":{"line":30,"column":43}},"19":{"start":{"line":33,"column":0},"end":{"line":35,"column":2}},"20":{"start":{"line":34,"column":2},"end":{"line":34,"column":41}},"21":{"start":{"line":37,"column":0},"end":{"line":39,"column":2}},"22":{"start":{"line":38,"column":2},"end":{"line":38,"column":42}},"23":{"start":{"line":41,"column":0},"end":{"line":43,"column":2}},"24":{"start":{"line":42,"column":2},"end":{"line":42,"column":39}},"25":{"start":{"line":45,"column":0},"end":{"line":47,"column":2}},"26":{"start":{"line":46,"column":2},"end":{"line":46,"column":40}},"27":{"start":{"line":49,"column":0},"end":{"line":51,"column":2}},"28":{"start":{"line":50,"column":2},"end":{"line":50,"column":40}},"29":{"start":{"line":53,"column":0},"end":{"line":55,"column":2}},"30":{"start":{"line":54,"column":2},"end":{"line":54,"column":42}},"31":{"start":{"line":57,"column":0},"end":{"line":59,"column":2}},"32":{"start":{"line":58,"column":2},"end":{"line":58,"column":39}},"33":{"start":{"line":61,"column":0},"end":{"line":61,"column":39}},"34":{"start":{"line":63,"column":0},"end":{"line":65,"column":2}},"35":{"start":{"line":64,"column":2},"end":{"line":64,"column":29}}},"branchMap":{"1":{"line":4,"type":"binary-expr","locations":[{"start":{"line":4,"column":12},"end":{"line":4,"column":19}},{"start":{"line":4,"column":23},"end":{"line":4,"column":25}}]},"2":{"line":5,"type":"binary-expr","locations":[{"start":{"line":5,"column":15},"end":{"line":5,"column":28}},{"start":{"line":5,"column":33},"end":{"line":5,"column":38}}]},"3":{"line":6,"type":"binary-expr","locations":[{"start":{"line":6,"column":15},"end":{"line":6,"column":29}},{"start":{"line":6,"column":33},"end":{"line":6,"column":35}}]},"4":{"line":8,"type":"cond-expr","locations":[{"start":{"line":9,"column":6},"end":{"line":9,"column":19}},{"start":{"line":10,"column":6},"end":{"line":10,"column":68}}]},"5":{"line":17,"type":"if","locations":[{"start":{"line":17,"column":2},"end":{"line":17,"column":2}},{"start":{"line":17,"column":2},"end":{"line":17,"column":2}}]}},"code":["var chalk = require('chalk');","","function Logger(options) {","  options = options || {};","  var debug  = options.debug  || false;","  var prefix = options.prefix || '';","","  var printPrefix = !prefix","    ? function() {}","    : function() { process.stdout.write(chalk.gray(prefix) + ' '); };","","  this._log = function(message) {","    printPrefix();","    process.stdout.write(message.trim() + '\\n');","  };","","  if(debug) {","    var self = this;","    this.debug = function(message) {","      self._log(chalk.cyan(message));","    };","  }","}","","Logger.prototype.user = function(message) {","  this._log(chalk.cyan(message));","};","","Logger.prototype.info = function(message) {","  this._log(chalk.magenta(' ' + message));","};","","Logger.prototype.success = function(message) {","  this._log(chalk.green(' ' + message));","};","","Logger.prototype.warn = function(message) {","  this._log(chalk.yellow(' ' + message));","};","","Logger.prototype.error = function(message) {","  this._log(chalk.red(' ' + message));","};","","Logger.prototype.command = function(message) {","  this._log(chalk.blue('$ ' + message));","};","","Logger.prototype.stdout = function(message) {","  this._log(chalk.gray('> ') + message);","};","","Logger.prototype.stdwarn = function(message) {","  this._log(chalk.yellow('> ') + message);","};","","Logger.prototype.stderr = function(message) {","  this._log(chalk.red('> ') + message);","};","","Logger.prototype.debug = function() {};","","module.exports = function(options) {","  return new Logger(options);","};",""],"l":{"1":1,"3":1,"4":3,"5":3,"6":3,"8":3,"10":0,"12":3,"13":0,"14":0,"17":3,"18":0,"19":0,"20":0,"25":1,"26":0,"29":1,"30":0,"33":1,"34":0,"37":1,"38":0,"41":1,"42":0,"45":1,"46":0,"49":1,"50":0,"53":1,"54":0,"57":1,"58":0,"61":1,"63":1,"64":3}},"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/errors.js":{"path":"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/errors.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":1,"8":1,"9":0,"10":0,"11":0,"12":1,"13":1,"14":0,"15":0,"16":0,"17":1,"18":1,"19":0,"20":0,"21":0,"22":1,"23":1,"24":0,"25":0,"26":0,"27":1,"28":1,"29":0,"30":0,"31":0,"32":1,"33":1,"34":0,"35":0,"36":0,"37":1,"38":1},"b":{},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"BaseError","line":3,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":28}}},"2":{"name":"InvalidTargetError","line":11,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":37}}},"3":{"name":"CommandExitedAbnormallyError","line":18,"loc":{"start":{"line":18,"column":0},"end":{"line":18,"column":47}}},"4":{"name":"ConnectionFailedError","line":25,"loc":{"start":{"line":25,"column":0},"end":{"line":25,"column":40}}},"5":{"name":"InvalidArgumentError","line":32,"loc":{"start":{"line":32,"column":0},"end":{"line":32,"column":39}}},"6":{"name":"AbortedError","line":39,"loc":{"start":{"line":39,"column":0},"end":{"line":39,"column":31}}},"7":{"name":"ProcessInterruptedError","line":46,"loc":{"start":{"line":46,"column":0},"end":{"line":46,"column":42}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":27}},"2":{"start":{"line":3,"column":0},"end":{"line":8,"column":1}},"3":{"start":{"line":4,"column":2},"end":{"line":4,"column":39}},"4":{"start":{"line":5,"column":2},"end":{"line":5,"column":50}},"5":{"start":{"line":6,"column":2},"end":{"line":6,"column":25}},"6":{"start":{"line":7,"column":2},"end":{"line":7,"column":36}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":32}},"8":{"start":{"line":11,"column":0},"end":{"line":15,"column":1}},"9":{"start":{"line":12,"column":2},"end":{"line":12,"column":48}},"10":{"start":{"line":13,"column":2},"end":{"line":13,"column":50}},"11":{"start":{"line":14,"column":2},"end":{"line":14,"column":36}},"12":{"start":{"line":16,"column":0},"end":{"line":16,"column":45}},"13":{"start":{"line":18,"column":0},"end":{"line":22,"column":1}},"14":{"start":{"line":19,"column":2},"end":{"line":19,"column":58}},"15":{"start":{"line":20,"column":2},"end":{"line":20,"column":50}},"16":{"start":{"line":21,"column":2},"end":{"line":21,"column":36}},"17":{"start":{"line":23,"column":0},"end":{"line":23,"column":55}},"18":{"start":{"line":25,"column":0},"end":{"line":29,"column":1}},"19":{"start":{"line":26,"column":2},"end":{"line":26,"column":51}},"20":{"start":{"line":27,"column":2},"end":{"line":27,"column":50}},"21":{"start":{"line":28,"column":2},"end":{"line":28,"column":36}},"22":{"start":{"line":30,"column":0},"end":{"line":30,"column":48}},"23":{"start":{"line":32,"column":0},"end":{"line":36,"column":1}},"24":{"start":{"line":33,"column":2},"end":{"line":33,"column":50}},"25":{"start":{"line":34,"column":2},"end":{"line":34,"column":50}},"26":{"start":{"line":35,"column":2},"end":{"line":35,"column":36}},"27":{"start":{"line":37,"column":0},"end":{"line":37,"column":47}},"28":{"start":{"line":39,"column":0},"end":{"line":43,"column":1}},"29":{"start":{"line":40,"column":2},"end":{"line":40,"column":42}},"30":{"start":{"line":41,"column":2},"end":{"line":41,"column":50}},"31":{"start":{"line":42,"column":2},"end":{"line":42,"column":36}},"32":{"start":{"line":44,"column":0},"end":{"line":44,"column":39}},"33":{"start":{"line":46,"column":0},"end":{"line":50,"column":1}},"34":{"start":{"line":47,"column":2},"end":{"line":47,"column":53}},"35":{"start":{"line":48,"column":2},"end":{"line":48,"column":50}},"36":{"start":{"line":49,"column":2},"end":{"line":49,"column":36}},"37":{"start":{"line":51,"column":0},"end":{"line":51,"column":50}},"38":{"start":{"line":53,"column":0},"end":{"line":61,"column":2}}},"branchMap":{},"code":["var util = require('util');","","function BaseError(message) {","  BaseError.super_.call(this, message);","  Error.captureStackTrace(this, this.constructor);","  this.message = message;","  this.name = this.constructor.name;","}","util.inherits(BaseError, Error);","","function InvalidTargetError(message) {","  InvalidTargetError.super_.call(this, message);","  Error.captureStackTrace(this, this.constructor);","  this.name = this.constructor.name;","}","util.inherits(InvalidTargetError, BaseError);","","function CommandExitedAbnormallyError(message) {","  CommandExitedAbnormallyError.super_.call(this, message);","  Error.captureStackTrace(this, this.constructor);","  this.name = this.constructor.name;","}","util.inherits(CommandExitedAbnormallyError, BaseError);","","function ConnectionFailedError(message) {","  ConnectionFailedError.super_.call(this, message);","  Error.captureStackTrace(this, this.constructor);","  this.name = this.constructor.name;","}","util.inherits(ConnectionFailedError, BaseError);","","function InvalidArgumentError(message) {","  InvalidArgumentError.super_.call(this, message);","  Error.captureStackTrace(this, this.constructor);","  this.name = this.constructor.name;","}","util.inherits(InvalidArgumentError, BaseError);","","function AbortedError(message) {","  AbortedError.super_.call(this, message);","  Error.captureStackTrace(this, this.constructor);","  this.name = this.constructor.name;","}","util.inherits(AbortedError, BaseError);","","function ProcessInterruptedError(message) {","  ProcessInterruptedError.super_.call(this, message);","  Error.captureStackTrace(this, this.constructor);","  this.name = this.constructor.name;","}","util.inherits(ProcessInterruptedError, BaseError);","","module.exports = {","  BaseError: BaseError,","  InvalidTargetError: InvalidTargetError,","  CommandExitedAbnormallyError: CommandExitedAbnormallyError,","  ConnectionFailedError: ConnectionFailedError,","  InvalidArgumentError: InvalidArgumentError,","  AbortedError: AbortedError,","  ProcessInterruptedError: ProcessInterruptedError","};",""],"l":{"1":1,"3":1,"4":0,"5":0,"6":0,"7":0,"9":1,"11":1,"12":0,"13":0,"14":0,"16":1,"18":1,"19":0,"20":0,"21":0,"23":1,"25":1,"26":0,"27":0,"28":0,"30":1,"32":1,"33":0,"34":0,"35":0,"37":1,"39":1,"40":0,"41":0,"42":0,"44":1,"46":1,"47":0,"48":0,"49":0,"51":1,"53":1}},"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/flight/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/flight/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1,"11":0},"b":{"1":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":11,"loc":{"start":{"line":11,"column":14},"end":{"line":11,"column":42}}},"2":{"name":"(anonymous_2)","line":23,"loc":{"start":{"line":23,"column":21},"end":{"line":23,"column":32}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":2,"column":33}},"2":{"start":{"line":4,"column":0},"end":{"line":7,"column":3}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":20}},"4":{"start":{"line":11,"column":0},"end":{"line":21,"column":2}},"5":{"start":{"line":12,"column":2},"end":{"line":20,"column":3}},"6":{"start":{"line":14,"column":6},"end":{"line":14,"column":29}},"7":{"start":{"line":15,"column":6},"end":{"line":15,"column":12}},"8":{"start":{"line":18,"column":6},"end":{"line":18,"column":30}},"9":{"start":{"line":19,"column":6},"end":{"line":19,"column":12}},"10":{"start":{"line":23,"column":0},"end":{"line":25,"column":2}},"11":{"start":{"line":24,"column":2},"end":{"line":24,"column":22}}},"branchMap":{"1":{"line":12,"type":"switch","locations":[{"start":{"line":13,"column":4},"end":{"line":15,"column":12}},{"start":{"line":17,"column":4},"end":{"line":19,"column":12}}]}},"code":["var local = require('./local')","  , remote = require('./remote');","","var TYPE = Object.freeze({","  LOCAL: 1,","  REMOTE: 2","});","","exports.TYPE = TYPE;","","exports.run = function(type, fn, context) {","  switch(type) {","    case TYPE.LOCAL:","      local.run(fn, context);","      break;","","    case TYPE.REMOTE:","      remote.run(fn, context);","      break;","  }","};","","exports.disconnect = function() {","  remote.disconnect();","};"],"l":{"1":1,"4":1,"9":1,"11":1,"12":0,"14":0,"15":0,"18":0,"19":0,"23":1,"24":0}},"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/flight/local.js":{"path":"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/flight/local.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"b":{},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":8,"loc":{"start":{"line":8,"column":14},"end":{"line":8,"column":36}}},"2":{"name":"(anonymous_2)","line":14,"loc":{"start":{"line":14,"column":13},"end":{"line":14,"column":24}}},"3":{"name":"(anonymous_3)","line":17,"loc":{"start":{"line":17,"column":14},"end":{"line":17,"column":25}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":6,"column":42}},"2":{"start":{"line":8,"column":0},"end":{"line":32,"column":2}},"3":{"start":{"line":9,"column":2},"end":{"line":9,"column":37}},"4":{"start":{"line":10,"column":2},"end":{"line":10,"column":42}},"5":{"start":{"line":12,"column":2},"end":{"line":12,"column":28}},"6":{"start":{"line":14,"column":2},"end":{"line":23,"column":4}},"7":{"start":{"line":15,"column":4},"end":{"line":15,"column":40}},"8":{"start":{"line":17,"column":4},"end":{"line":20,"column":13}},"9":{"start":{"line":18,"column":6},"end":{"line":18,"column":20}},"10":{"start":{"line":19,"column":6},"end":{"line":19,"column":29}},"11":{"start":{"line":22,"column":4},"end":{"line":22,"column":18}},"12":{"start":{"line":25,"column":2},"end":{"line":25,"column":27}},"13":{"start":{"line":27,"column":2},"end":{"line":27,"column":38}},"14":{"start":{"line":29,"column":2},"end":{"line":29,"column":22}},"15":{"start":{"line":31,"column":2},"end":{"line":31,"column":76}}},"branchMap":{},"code":["var extend = require('util-extend')","  , Fiber = require('fibers')","  , Future = require('fibers/future')","  , Shell = require('../transport/shell')","  , logger = require('../logger')()","  , prettyTime = require('pretty-hrtime');","","exports.run = function(fn, context) {","  var _context = extend({}, context);","  _context.remote = { host: 'localhost' };","","  var future = new Future();","","  var task = function() {","    var transport = new Shell(_context);","","    new Fiber(function() {","      fn(transport);","      return future.return();","    }).run();","","    return future;","  };","","  var t = process.hrtime();","","  logger.info('Executing local task');","","  Future.wait(task());","","  logger.info('Local task finished after ' + prettyTime(process.hrtime(t)));","};"],"l":{"1":1,"8":1,"9":0,"10":0,"12":0,"14":0,"15":0,"17":0,"18":0,"19":0,"22":0,"25":0,"27":0,"29":0,"31":0}},"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/transport/shell.js":{"path":"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/transport/shell.js","s":{"1":1,"2":1,"3":0,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},"fnMap":{"1":{"name":"Shell","line":12,"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":24}}},"2":{"name":"(anonymous_2)","line":17,"loc":{"start":{"line":17,"column":24},"end":{"line":17,"column":51}}},"3":{"name":"(anonymous_3)","line":36,"loc":{"start":{"line":36,"column":25},"end":{"line":36,"column":40}}},"4":{"name":"(anonymous_4)","line":40,"loc":{"start":{"line":40,"column":25},"end":{"line":40,"column":40}}},"5":{"name":"(anonymous_5)","line":44,"loc":{"start":{"line":44,"column":33},"end":{"line":44,"column":48}}},"6":{"name":"(anonymous_6)","line":50,"loc":{"start":{"line":50,"column":33},"end":{"line":50,"column":48}}},"7":{"name":"(anonymous_7)","line":54,"loc":{"start":{"line":54,"column":19},"end":{"line":54,"column":34}}},"8":{"name":"(anonymous_8)","line":76,"loc":{"start":{"line":76,"column":27},"end":{"line":76,"column":63}}},"9":{"name":"(anonymous_9)","line":106,"loc":{"start":{"line":106,"column":13},"end":{"line":106,"column":30}}},"10":{"name":"(anonymous_10)","line":118,"loc":{"start":{"line":118,"column":14},"end":{"line":118,"column":25}}},"11":{"name":"(anonymous_11)","line":128,"loc":{"start":{"line":128,"column":30},"end":{"line":128,"column":47}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":10,"column":34}},"2":{"start":{"line":12,"column":0},"end":{"line":14,"column":1}},"3":{"start":{"line":13,"column":2},"end":{"line":13,"column":35}},"4":{"start":{"line":15,"column":0},"end":{"line":15,"column":32}},"5":{"start":{"line":17,"column":0},"end":{"line":74,"column":2}},"6":{"start":{"line":18,"column":2},"end":{"line":18,"column":26}},"7":{"start":{"line":20,"column":2},"end":{"line":20,"column":18}},"8":{"start":{"line":22,"column":2},"end":{"line":22,"column":55}},"9":{"start":{"line":24,"column":2},"end":{"line":28,"column":4}},"10":{"start":{"line":30,"column":2},"end":{"line":30,"column":32}},"11":{"start":{"line":32,"column":2},"end":{"line":32,"column":28}},"12":{"start":{"line":34,"column":2},"end":{"line":34,"column":77}},"13":{"start":{"line":36,"column":2},"end":{"line":38,"column":5}},"14":{"start":{"line":37,"column":4},"end":{"line":37,"column":49}},"15":{"start":{"line":40,"column":2},"end":{"line":42,"column":5}},"16":{"start":{"line":41,"column":4},"end":{"line":41,"column":49}},"17":{"start":{"line":44,"column":2},"end":{"line":48,"column":5}},"18":{"start":{"line":45,"column":4},"end":{"line":47,"column":5}},"19":{"start":{"line":46,"column":6},"end":{"line":46,"column":47}},"20":{"start":{"line":50,"column":2},"end":{"line":52,"column":5}},"21":{"start":{"line":51,"column":4},"end":{"line":51,"column":72}},"22":{"start":{"line":54,"column":2},"end":{"line":71,"column":5}},"23":{"start":{"line":55,"column":4},"end":{"line":55,"column":23}},"24":{"start":{"line":57,"column":4},"end":{"line":68,"column":5}},"25":{"start":{"line":58,"column":6},"end":{"line":58,"column":33}},"26":{"start":{"line":59,"column":11},"end":{"line":68,"column":5}},"27":{"start":{"line":60,"column":6},"end":{"line":60,"column":63}},"28":{"start":{"line":62,"column":6},"end":{"line":62,"column":57}},"29":{"start":{"line":64,"column":6},"end":{"line":65,"column":79}},"30":{"start":{"line":67,"column":6},"end":{"line":67,"column":36}},"31":{"start":{"line":70,"column":4},"end":{"line":70,"column":22}},"32":{"start":{"line":73,"column":2},"end":{"line":73,"column":23}},"33":{"start":{"line":76,"column":0},"end":{"line":137,"column":2}},"34":{"start":{"line":77,"column":2},"end":{"line":77,"column":55}},"35":{"start":{"line":79,"column":2},"end":{"line":81,"column":3}},"36":{"start":{"line":80,"column":4},"end":{"line":80,"column":80}},"37":{"start":{"line":83,"column":2},"end":{"line":91,"column":3}},"38":{"start":{"line":84,"column":4},"end":{"line":84,"column":29}},"39":{"start":{"line":85,"column":9},"end":{"line":91,"column":3}},"40":{"start":{"line":86,"column":4},"end":{"line":88,"column":5}},"41":{"start":{"line":87,"column":6},"end":{"line":87,"column":83}},"42":{"start":{"line":90,"column":4},"end":{"line":90,"column":25}},"43":{"start":{"line":93,"column":2},"end":{"line":93,"column":58}},"44":{"start":{"line":95,"column":2},"end":{"line":97,"column":3}},"45":{"start":{"line":96,"column":4},"end":{"line":96,"column":82}},"46":{"start":{"line":99,"column":2},"end":{"line":99,"column":37}},"47":{"start":{"line":101,"column":2},"end":{"line":101,"column":69}},"48":{"start":{"line":102,"column":2},"end":{"line":102,"column":19}},"49":{"start":{"line":104,"column":2},"end":{"line":104,"column":18}},"50":{"start":{"line":106,"column":2},"end":{"line":125,"column":4}},"51":{"start":{"line":107,"column":4},"end":{"line":107,"column":73}},"52":{"start":{"line":108,"column":4},"end":{"line":110,"column":54}},"53":{"start":{"line":112,"column":4},"end":{"line":114,"column":70}},"54":{"start":{"line":116,"column":4},"end":{"line":116,"column":30}},"55":{"start":{"line":118,"column":4},"end":{"line":122,"column":13}},"56":{"start":{"line":119,"column":6},"end":{"line":119,"column":48}},"57":{"start":{"line":121,"column":6},"end":{"line":121,"column":29}},"58":{"start":{"line":124,"column":4},"end":{"line":124,"column":18}},"59":{"start":{"line":127,"column":2},"end":{"line":127,"column":17}},"60":{"start":{"line":128,"column":2},"end":{"line":130,"column":5}},"61":{"start":{"line":129,"column":4},"end":{"line":129,"column":29}},"62":{"start":{"line":132,"column":2},"end":{"line":132,"column":21}},"63":{"start":{"line":134,"column":2},"end":{"line":134,"column":21}},"64":{"start":{"line":136,"column":2},"end":{"line":136,"column":17}},"65":{"start":{"line":139,"column":0},"end":{"line":139,"column":23}}},"branchMap":{"1":{"line":18,"type":"binary-expr","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":19}},{"start":{"line":18,"column":23},"end":{"line":18,"column":25}}]},"2":{"line":37,"type":"binary-expr","locations":[{"start":{"line":37,"column":21},"end":{"line":37,"column":34}},{"start":{"line":37,"column":38},"end":{"line":37,"column":40}}]},"3":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":21},"end":{"line":41,"column":34}},{"start":{"line":41,"column":38},"end":{"line":41,"column":40}}]},"4":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":4},"end":{"line":45,"column":4}},{"start":{"line":45,"column":4},"end":{"line":45,"column":4}}]},"5":{"line":51,"type":"cond-expr","locations":[{"start":{"line":51,"column":36},"end":{"line":51,"column":45}},{"start":{"line":51,"column":48},"end":{"line":51,"column":56}}]},"6":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":4},"end":{"line":57,"column":4}},{"start":{"line":57,"column":4},"end":{"line":57,"column":4}}]},"7":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":11},"end":{"line":59,"column":11}},{"start":{"line":59,"column":11},"end":{"line":59,"column":11}}]},"8":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":2},"end":{"line":79,"column":2}},{"start":{"line":79,"column":2},"end":{"line":79,"column":2}}]},"9":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":2},"end":{"line":83,"column":2}},{"start":{"line":83,"column":2},"end":{"line":83,"column":2}}]},"10":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":9},"end":{"line":85,"column":9}},{"start":{"line":85,"column":9},"end":{"line":85,"column":9}}]},"11":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":4},"end":{"line":86,"column":4}},{"start":{"line":86,"column":4},"end":{"line":86,"column":4}}]},"12":{"line":93,"type":"binary-expr","locations":[{"start":{"line":93,"column":11},"end":{"line":93,"column":16}},{"start":{"line":93,"column":20},"end":{"line":93,"column":22}}]},"13":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":2},"end":{"line":95,"column":2}},{"start":{"line":95,"column":2},"end":{"line":95,"column":2}}]},"14":{"line":101,"type":"cond-expr","locations":[{"start":{"line":101,"column":58},"end":{"line":101,"column":62}},{"start":{"line":101,"column":65},"end":{"line":101,"column":67}}]},"15":{"line":107,"type":"cond-expr","locations":[{"start":{"line":107,"column":40},"end":{"line":107,"column":66}},{"start":{"line":107,"column":69},"end":{"line":107,"column":71}}]},"16":{"line":109,"type":"cond-expr","locations":[{"start":{"line":109,"column":49},"end":{"line":109,"column":70}},{"start":{"line":109,"column":73},"end":{"line":109,"column":75}}]},"17":{"line":114,"type":"binary-expr","locations":[{"start":{"line":114,"column":30},"end":{"line":114,"column":41}},{"start":{"line":114,"column":45},"end":{"line":114,"column":47}}]}},"code":["var util = require('util')","  , extend = require('util-extend')","  , exec = require('child_process').exec","  , byline = require('byline')","  , fs = require('fs')","  , writeTempFile = require('../utils').writeTempFile","  , Fiber = require('fibers')","  , Future = require('fibers/future')","  , Transport = require('./index')","  , errors = require('../errors');","","function Shell(context) {","  Shell.super_.call(this, context);","}","util.inherits(Shell, Transport);","","Shell.prototype._exec = function(command, options) {","  options = options || {};","","  var self = this;","","  options = extend(extend({}, self._options), options); // clone and extend","","  var result = {","    code: 0,","    stdout: null,","    stderr: null","  };","","  self._logger.command(command);","","  var fiber = Fiber.current;","","  var proc = exec(command, extend({ maxBuffer: 1000 * 1024 }, options.exec));","","  proc.stdout.on('data', function(data) {","    result.stdout = (result.stdout || '') + data;","  });","","  proc.stderr.on('data', function(data) {","    result.stderr = (result.stderr || '') + data;","  });","","  byline(proc.stdout).on('data', function(data) {","    if(!options.silent) {","      self._logger.stdout(String(data).trim());","    }","  });","","  byline(proc.stderr).on('data', function(data) {","    self._logger[options.failsafe ? 'stdwarn' : 'stderr'](String(data));","  });","","  proc.on('close', function(code) {","    result.code = code;","","    if(result.code === 0) {","      self._logger.success('ok');","    } else if(options.failsafe) {","      self._logger.warn('failed safely (' + result.code + ')');","    } else {","      self._logger.error('failed (' + result.code + ')');","","      var error = new errors.CommandExitedAbnormallyError(","                  'Command exited abnormally on ' + self._context.remote.host);","","      return fiber.throwInto(error);","    }","","    fiber.run(result);","  });","","  return Fiber.yield();","};","","Shell.prototype.transfer = function(files, remoteDir, options) {","  options = extend(extend({}, this._options), options); // clone and extend","","  if(!remoteDir) {","    throw new errors.InvalidArgumentError('Missing remote path for transfer()');","  }","","  if(Array.isArray(files)) {","    files = files.join('\\n');","  } else if(files instanceof Object) {","    if(!files.hasOwnProperty('stdout')) {","      throw new errors.InvalidArgumentError('Invalid object passed to transfer()');","    }","","    files = files.stdout;","  }","","  files = (files || '').trim().replace(/[\\r|\\0]/mg, '\\n');","","  if(!files) {","    throw new errors.InvalidArgumentError('Empty file list passed to transfer()');","  }","","  var tmpFile = writeTempFile(files);","","  var rsyncFlags = '-az' + (this._context.options.debug ? 'vv' : '');","  var results = [];","","  var self = this;","","  var task = function(remote) {","    var sshFlags = (remote.privateKey ? ' -i ' + remote.privateKey : '');","    var remoteUrl = util.format('%s%s:%s',","                              (remote.username ? remote.username + '@' : ''),","                              remote.host, remoteDir);","","    var command = util.format('rsync --files-from %s %s --rsh=\"ssh -p%s%s\" ./ %s',","                              tmpFile, rsyncFlags,","                              remote.port || 22, sshFlags, remoteUrl);","","    var future = new Future();","","    new Fiber(function() {","      results.push(self.exec(command, options));","","      return future.return();","    }).run();","","    return future;","  };","","  var tasks = [];","  self._context.hosts.forEach(function(remote) {","    tasks.push(task(remote));","  });","","  Future.wait(tasks);","","  fs.unlink(tmpFile);","","  return results;","};","","module.exports = Shell;",""],"l":{"1":1,"12":1,"13":0,"15":1,"17":1,"18":0,"20":0,"22":0,"24":0,"30":0,"32":0,"34":0,"36":0,"37":0,"40":0,"41":0,"44":0,"45":0,"46":0,"50":0,"51":0,"54":0,"55":0,"57":0,"58":0,"59":0,"60":0,"62":0,"64":0,"67":0,"70":0,"73":0,"76":1,"77":0,"79":0,"80":0,"83":0,"84":0,"85":0,"86":0,"87":0,"90":0,"93":0,"95":0,"96":0,"99":0,"101":0,"102":0,"104":0,"106":0,"107":0,"108":0,"112":0,"116":0,"118":0,"119":0,"121":0,"124":0,"127":0,"128":0,"129":0,"132":0,"134":0,"136":0,"139":1}},"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/utils/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/utils/index.js","s":{"1":1,"2":1,"3":0,"4":1,"5":0,"6":0,"7":0,"8":0,"9":1,"10":0,"11":0,"12":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"tempFilePath","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":32}}},"2":{"name":"(anonymous_2)","line":11,"loc":{"start":{"line":11,"column":24},"end":{"line":11,"column":38}}},"3":{"name":"(anonymous_3)","line":20,"loc":{"start":{"line":20,"column":29},"end":{"line":20,"column":43}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":5,"column":31}},"2":{"start":{"line":7,"column":0},"end":{"line":9,"column":1}},"3":{"start":{"line":8,"column":2},"end":{"line":8,"column":79}},"4":{"start":{"line":11,"column":0},"end":{"line":18,"column":2}},"5":{"start":{"line":12,"column":2},"end":{"line":12,"column":42}},"6":{"start":{"line":13,"column":2},"end":{"line":13,"column":60}},"7":{"start":{"line":15,"column":2},"end":{"line":15,"column":34}},"8":{"start":{"line":17,"column":2},"end":{"line":17,"column":18}},"9":{"start":{"line":20,"column":0},"end":{"line":26,"column":2}},"10":{"start":{"line":21,"column":2},"end":{"line":23,"column":3}},"11":{"start":{"line":22,"column":4},"end":{"line":22,"column":15}},"12":{"start":{"line":25,"column":2},"end":{"line":25,"column":36}}},"branchMap":{"1":{"line":8,"type":"binary-expr","locations":[{"start":{"line":8,"column":19},"end":{"line":8,"column":27}},{"start":{"line":8,"column":31},"end":{"line":8,"column":37}}]},"2":{"line":13,"type":"cond-expr","locations":[{"start":{"line":13,"column":25},"end":{"line":13,"column":42}},{"start":{"line":13,"column":45},"end":{"line":13,"column":59}}]},"3":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":2},"end":{"line":21,"column":2}},{"start":{"line":21,"column":2},"end":{"line":21,"column":2}}]}},"code":["var fs = require('fs')","  , os = require('os')","  , tmpdir = os.tmpdir()","  , path = require('path')","  , crypto = require('crypto');","","function tempFilePath(filepath) {","  return path.join(filepath || tmpdir, crypto.randomBytes(16).toString('hex'));","}","","exports.writeTempFile = function(str) {","  var isWin = /^win/i.test(os.platform());","  var fullpath = isWin ? tempFilePath('.') : tempFilePath();","","  fs.writeFileSync(fullpath, str);","","  return fullpath;","};","","exports.escapeSingleQuotes = function(str) {","  if(!str) {","    return str;","  }","","  return str.replace(/'/g, \"'\\\\''\");","};",""],"l":{"1":1,"7":1,"8":0,"11":1,"12":0,"13":0,"15":0,"17":0,"20":1,"21":0,"22":0,"25":0}},"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/transport/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/transport/index.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1,"17":0,"18":1,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1,"31":0,"32":1,"33":1,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1,"49":1,"50":0,"51":0,"52":0,"53":0,"54":0,"55":1,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":1,"69":0,"70":1,"71":0,"72":1,"73":0,"74":1,"75":0,"76":1,"77":0,"78":1,"79":0,"80":1,"81":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},"fnMap":{"1":{"name":"Transport","line":53,"loc":{"start":{"line":53,"column":0},"end":{"line":53,"column":28}}},"2":{"name":"(anonymous_2)","line":68,"loc":{"start":{"line":68,"column":19},"end":{"line":68,"column":37}}},"3":{"name":"(anonymous_3)","line":69,"loc":{"start":{"line":69,"column":20},"end":{"line":69,"column":44}}},"4":{"name":"(anonymous_4)","line":83,"loc":{"start":{"line":83,"column":28},"end":{"line":83,"column":39}}},"5":{"name":"(anonymous_5)","line":137,"loc":{"start":{"line":137,"column":27},"end":{"line":137,"column":54}}},"6":{"name":"(anonymous_6)","line":186,"loc":{"start":{"line":186,"column":27},"end":{"line":186,"column":54}}},"7":{"name":"(anonymous_7)","line":242,"loc":{"start":{"line":242,"column":31},"end":{"line":242,"column":42}}},"8":{"name":"(anonymous_8)","line":272,"loc":{"start":{"line":272,"column":29},"end":{"line":272,"column":56}}},"9":{"name":"(anonymous_9)","line":277,"loc":{"start":{"line":277,"column":22},"end":{"line":277,"column":37}}},"10":{"name":"(anonymous_10)","line":278,"loc":{"start":{"line":278,"column":21},"end":{"line":278,"column":32}}},"11":{"name":"(anonymous_11)","line":289,"loc":{"start":{"line":289,"column":9},"end":{"line":289,"column":31}}},"12":{"name":"(anonymous_12)","line":294,"loc":{"start":{"line":294,"column":25},"end":{"line":294,"column":36}}},"13":{"name":"(anonymous_13)","line":325,"loc":{"start":{"line":325,"column":30},"end":{"line":325,"column":43}}},"14":{"name":"task","line":326,"loc":{"start":{"line":326,"column":2},"end":{"line":326,"column":18}}},"15":{"name":"(anonymous_15)","line":329,"loc":{"start":{"line":329,"column":7},"end":{"line":329,"column":24}}},"16":{"name":"(anonymous_16)","line":358,"loc":{"start":{"line":358,"column":27},"end":{"line":358,"column":38}}},"17":{"name":"(anonymous_17)","line":390,"loc":{"start":{"line":390,"column":29},"end":{"line":390,"column":40}}},"18":{"name":"(anonymous_18)","line":407,"loc":{"start":{"line":407,"column":30},"end":{"line":407,"column":41}}},"19":{"name":"(anonymous_19)","line":426,"loc":{"start":{"line":426,"column":31},"end":{"line":426,"column":42}}},"20":{"name":"(anonymous_20)","line":446,"loc":{"start":{"line":446,"column":29},"end":{"line":446,"column":40}}},"21":{"name":"(anonymous_21)","line":460,"loc":{"start":{"line":460,"column":26},"end":{"line":460,"column":44}}},"22":{"name":"(anonymous_22)","line":475,"loc":{"start":{"line":475,"column":28},"end":{"line":475,"column":46}}},"23":{"name":"(anonymous_23)","line":479,"loc":{"start":{"line":479,"column":28},"end":{"line":479,"column":39}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":10,"column":64}},"2":{"start":{"line":53,"column":0},"end":{"line":81,"column":1}},"3":{"start":{"line":54,"column":2},"end":{"line":54,"column":26}},"4":{"start":{"line":55,"column":2},"end":{"line":58,"column":4}},"5":{"start":{"line":59,"column":2},"end":{"line":59,"column":22}},"6":{"start":{"line":61,"column":2},"end":{"line":64,"column":5}},"7":{"start":{"line":66,"column":2},"end":{"line":66,"column":65}},"8":{"start":{"line":68,"column":2},"end":{"line":80,"column":11}},"9":{"start":{"line":69,"column":4},"end":{"line":79,"column":6}},"10":{"start":{"line":70,"column":6},"end":{"line":73,"column":7}},"11":{"start":{"line":71,"column":8},"end":{"line":71,"column":23}},"12":{"start":{"line":72,"column":8},"end":{"line":72,"column":20}},"13":{"start":{"line":75,"column":6},"end":{"line":75,"column":61}},"14":{"start":{"line":76,"column":6},"end":{"line":76,"column":67}},"15":{"start":{"line":78,"column":6},"end":{"line":78,"column":49}},"16":{"start":{"line":83,"column":0},"end":{"line":85,"column":2}},"17":{"start":{"line":84,"column":2},"end":{"line":84,"column":81}},"18":{"start":{"line":137,"column":0},"end":{"line":142,"column":2}},"19":{"start":{"line":138,"column":2},"end":{"line":138,"column":26}},"20":{"start":{"line":139,"column":2},"end":{"line":139,"column":26}},"21":{"start":{"line":141,"column":2},"end":{"line":141,"column":70}},"22":{"start":{"line":186,"column":0},"end":{"line":197,"column":2}},"23":{"start":{"line":187,"column":2},"end":{"line":187,"column":26}},"24":{"start":{"line":188,"column":2},"end":{"line":188,"column":26}},"25":{"start":{"line":190,"column":2},"end":{"line":190,"column":36}},"26":{"start":{"line":192,"column":2},"end":{"line":192,"column":52}},"27":{"start":{"line":193,"column":2},"end":{"line":193,"column":40}},"28":{"start":{"line":194,"column":2},"end":{"line":194,"column":68}},"29":{"start":{"line":196,"column":2},"end":{"line":196,"column":38}},"30":{"start":{"line":242,"column":0},"end":{"line":244,"column":2}},"31":{"start":{"line":243,"column":2},"end":{"line":243,"column":93}},"32":{"start":{"line":270,"column":0},"end":{"line":270,"column":26}},"33":{"start":{"line":272,"column":0},"end":{"line":302,"column":2}},"34":{"start":{"line":273,"column":2},"end":{"line":273,"column":26}},"35":{"start":{"line":275,"column":2},"end":{"line":275,"column":41}},"36":{"start":{"line":277,"column":2},"end":{"line":301,"column":5}},"37":{"start":{"line":278,"column":4},"end":{"line":298,"column":7}},"38":{"start":{"line":279,"column":6},"end":{"line":279,"column":28}},"39":{"start":{"line":280,"column":6},"end":{"line":280,"column":28}},"40":{"start":{"line":281,"column":6},"end":{"line":281,"column":50}},"41":{"start":{"line":282,"column":6},"end":{"line":282,"column":21}},"42":{"start":{"line":284,"column":6},"end":{"line":297,"column":9}},"43":{"start":{"line":290,"column":8},"end":{"line":292,"column":9}},"44":{"start":{"line":291,"column":10},"end":{"line":291,"column":75}},"45":{"start":{"line":294,"column":8},"end":{"line":296,"column":11}},"46":{"start":{"line":295,"column":10},"end":{"line":295,"column":45}},"47":{"start":{"line":300,"column":4},"end":{"line":300,"column":23}},"48":{"start":{"line":325,"column":0},"end":{"line":337,"column":2}},"49":{"start":{"line":326,"column":2},"end":{"line":334,"column":3}},"50":{"start":{"line":327,"column":4},"end":{"line":327,"column":30}},"51":{"start":{"line":329,"column":4},"end":{"line":331,"column":7}},"52":{"start":{"line":330,"column":6},"end":{"line":330,"column":28}},"53":{"start":{"line":333,"column":4},"end":{"line":333,"column":18}},"54":{"start":{"line":336,"column":2},"end":{"line":336,"column":23}},"55":{"start":{"line":358,"column":0},"end":{"line":376,"column":2}},"56":{"start":{"line":359,"column":2},"end":{"line":359,"column":40}},"57":{"start":{"line":360,"column":2},"end":{"line":360,"column":50}},"58":{"start":{"line":362,"column":2},"end":{"line":362,"column":54}},"59":{"start":{"line":364,"column":2},"end":{"line":372,"column":3}},"60":{"start":{"line":365,"column":4},"end":{"line":371,"column":5}},"61":{"start":{"line":366,"column":6},"end":{"line":366,"column":41}},"62":{"start":{"line":367,"column":11},"end":{"line":371,"column":5}},"63":{"start":{"line":368,"column":6},"end":{"line":368,"column":53}},"64":{"start":{"line":369,"column":11},"end":{"line":371,"column":5}},"65":{"start":{"line":370,"column":6},"end":{"line":370,"column":16}},"66":{"start":{"line":374,"column":2},"end":{"line":374,"column":36}},"67":{"start":{"line":375,"column":2},"end":{"line":375,"column":34}},"68":{"start":{"line":390,"column":0},"end":{"line":392,"column":2}},"69":{"start":{"line":391,"column":2},"end":{"line":391,"column":30}},"70":{"start":{"line":407,"column":0},"end":{"line":409,"column":2}},"71":{"start":{"line":408,"column":2},"end":{"line":408,"column":31}},"72":{"start":{"line":426,"column":0},"end":{"line":428,"column":2}},"73":{"start":{"line":427,"column":2},"end":{"line":427,"column":32}},"74":{"start":{"line":446,"column":0},"end":{"line":448,"column":2}},"75":{"start":{"line":447,"column":2},"end":{"line":447,"column":33}},"76":{"start":{"line":460,"column":0},"end":{"line":462,"column":2}},"77":{"start":{"line":461,"column":2},"end":{"line":461,"column":29}},"78":{"start":{"line":475,"column":0},"end":{"line":477,"column":2}},"79":{"start":{"line":476,"column":2},"end":{"line":476,"column":30}},"80":{"start":{"line":479,"column":0},"end":{"line":479,"column":42}},"81":{"start":{"line":481,"column":0},"end":{"line":481,"column":27}}},"branchMap":{"1":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":6},"end":{"line":70,"column":6}},{"start":{"line":70,"column":6},"end":{"line":70,"column":6}}]},"2":{"line":76,"type":"cond-expr","locations":[{"start":{"line":76,"column":24},"end":{"line":76,"column":55}},{"start":{"line":76,"column":58},"end":{"line":76,"column":66}}]},"3":{"line":78,"type":"binary-expr","locations":[{"start":{"line":78,"column":34},"end":{"line":78,"column":41}},{"start":{"line":78,"column":45},"end":{"line":78,"column":47}}]},"4":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":12},"end":{"line":138,"column":19}},{"start":{"line":138,"column":23},"end":{"line":138,"column":25}}]},"5":{"line":139,"type":"binary-expr","locations":[{"start":{"line":139,"column":12},"end":{"line":139,"column":19}},{"start":{"line":139,"column":23},"end":{"line":139,"column":25}}]},"6":{"line":187,"type":"binary-expr","locations":[{"start":{"line":187,"column":12},"end":{"line":187,"column":19}},{"start":{"line":187,"column":23},"end":{"line":187,"column":25}}]},"7":{"line":188,"type":"binary-expr","locations":[{"start":{"line":188,"column":12},"end":{"line":188,"column":19}},{"start":{"line":188,"column":23},"end":{"line":188,"column":25}}]},"8":{"line":190,"type":"binary-expr","locations":[{"start":{"line":190,"column":13},"end":{"line":190,"column":25}},{"start":{"line":190,"column":29},"end":{"line":190,"column":35}}]},"9":{"line":273,"type":"binary-expr","locations":[{"start":{"line":273,"column":12},"end":{"line":273,"column":19}},{"start":{"line":273,"column":23},"end":{"line":273,"column":25}}]},"10":{"line":287,"type":"binary-expr","locations":[{"start":{"line":287,"column":16},"end":{"line":287,"column":30}},{"start":{"line":287,"column":34},"end":{"line":287,"column":39}}]},"11":{"line":288,"type":"binary-expr","locations":[{"start":{"line":288,"column":18},"end":{"line":288,"column":34}},{"start":{"line":288,"column":38},"end":{"line":288,"column":43}}]},"12":{"line":290,"type":"if","locations":[{"start":{"line":290,"column":8},"end":{"line":290,"column":8}},{"start":{"line":290,"column":8},"end":{"line":290,"column":8}}]},"13":{"line":295,"type":"cond-expr","locations":[{"start":{"line":295,"column":24},"end":{"line":295,"column":36}},{"start":{"line":295,"column":39},"end":{"line":295,"column":43}}]},"14":{"line":365,"type":"if","locations":[{"start":{"line":365,"column":4},"end":{"line":365,"column":4}},{"start":{"line":365,"column":4},"end":{"line":365,"column":4}}]},"15":{"line":367,"type":"if","locations":[{"start":{"line":367,"column":11},"end":{"line":367,"column":11}},{"start":{"line":367,"column":11},"end":{"line":367,"column":11}}]},"16":{"line":369,"type":"if","locations":[{"start":{"line":369,"column":11},"end":{"line":369,"column":11}},{"start":{"line":369,"column":11},"end":{"line":369,"column":11}}]}},"code":["var format = require('util').format","  , extend = require('util-extend')","  , Future = require('fibers/future')","  , prompt = require('prompt')","  , chalk = require('chalk')","  , logger = require('../logger')","  , errors = require('../errors')","  , commands = require('./commands')","  , queue = require('../utils/queue')","  , escapeSingleQuotes = require('../utils').escapeSingleQuotes;","","/**"," * A transport is the interface you use during flights. Basically they"," * offer you a set of methods to execute a chain of commands. Depending on the"," * type of flight, this is either a `Shell` object for local"," * flights, or an `SSH` for remote flights. Both transports"," * expose the same set of methods as described in this section."," *"," * ```javascript"," * plan.local(function(local) {"," *   local.echo('Shell.echo() called');"," * });"," *"," * plan.remote(function(remote) {"," *   remote.echo('SSH.echo() called');"," * });"," * ```"," *"," * We call the Transport object `transport` in the following section to avoid"," * confusion. However, do yourself a favor and use `local` for local, and"," * `remote` for remote flights."," *"," * #### Accessing runtime information"," *"," * Flightplan provides information during flights with the `runtime` properties:"," *"," * ```javascript"," * plan.remote(function(transport) { // applies to local flights as well"," *   // Flightplan specific information"," *   console.log(plan.runtime.task);    // 'default'"," *   console.log(plan.runtime.target);  // 'production'"," *   console.log(plan.runtime.hosts);   // [{ host: 'www1.example.com', port: 22 }, ...]"," *   console.log(plan.runtime.options); // { debug: true, ... }"," *"," *   // Flight specific information"," *   console.log(transport.runtime); // { host: 'www1.example.com', port: 22 }"," * });"," * ```"," *"," * @class Transport"," * @return {Object} transport"," */","function Transport(context) {","  this._context = context;","  this._options = {","    silent: false,","    failsafe: false","  };","  this._execWith = '';","","  this._logger = logger({","    debug: this._context.options.debug,","    prefix: this._context.remote.host","  });","","  this.runtime = Object.freeze(extend({}, this._context.remote)); // userland","","  commands.forEach(function(command) {","    this[command] = function(args, options) {","      if(typeof args === 'object') {","        options = args;","        args = null;","      }","","      var _command = format('%s%s', this._execWith, command);","      _command = args ? format('%s %s', _command, args) : _command;","","      return this._exec(_command, options || {});","    };","  }, this);","}","","Transport.prototype._exec = function() {","  throw new Error('This transport does not implement `_exec(command, options)`');","};","","/**"," * To execute a command you have the choice between using `exec()` or one"," * of the handy wrappers for often used commands:"," * `transport.exec('ls -al')` is the same as `transport.ls('-al')`. If a"," * command returns a non-zero exit code, the flightplan will be aborted and"," * all subsequent commands and flights won't get executed."," *"," * #### Options"," * Options can be passed as a second argument. If `failsafe: true` is"," * passed, the command is allowed to fail (i.e. exiting with a non-zero"," * exit code), whereas `silent: true` will simply suppress its output."," *"," * ```javascript"," * // output of `ls -al` is suppressed"," * transport.ls('-al', {silent: true});"," *"," * // flightplan continues even if command fails with exit code `1`"," * transport.ls('-al foo', {failsafe: true}); // ls: foo: No such file or directory"," *"," * // both options together"," * transport.ls('-al foo', {silent: true, failsafe: true});"," * ```"," *"," * To apply these options to multiple commands check out the docs of"," * `transport.silent()` and `transport.failsafe()`."," *"," * #### Return value"," * Each command returns an object containing `code`, `stdout` and`stderr`:"," *"," * ```javascript"," * var result = transport.echo('Hello world');"," * console.log(result); // { code: 0, stdout: 'Hello world\\n', stderr: null }"," * ```"," *"," * #### Advanced options"," * Flightplan uses `child_process#exec()` for executing local commands and"," * `mscdex/ssh2#exec()` for remote commands. Options passed with `exec` will"," * be forwarded to either of these functions."," *"," * ```javascript"," * // increase maxBuffer for child_process#exec()"," * local.ls('-al', {exec: {maxBuffer: 2000*1024}});"," *"," * // enable pty for mscdex/ssh2#exec()"," * remote.ls('-al', {exec: {pty: true}});"," * ```"," *"," * @method exec(command[, options])"," * @return {Object} code: int, stdout: String, stderr: String"," */","Transport.prototype.exec = function(command, options) {","  command = command || '';","  options = options || {};","","  return this._exec(format('%s%s', this._execWith, command), options);","};","","/**"," * Execute a command as another user with `sudo()`. It has the same"," * signature as `exec()`. Per default, the user under which the command"," * will be executed is \"root\". This can be changed by passing"," * `user: \"name\"` with the second argument:"," *"," * ```javascript"," * // will run: echo 'echo Hello world' | sudo -u root -i bash"," * transport.sudo('echo Hello world');"," *"," * // will run echo 'echo Hello world' | sudo -u www -i bash"," * transport.sudo('echo Hello world', {user: 'www'});"," *"," * // further options passed (see `exec()`)"," * transport.sudo('echo Hello world', {user: 'www', silent: true, failsafe: true});"," * ```"," *"," * Flightplan's `sudo()` requires a certain setup on your host. In order to"," * make things work on a typical Ubuntu installation, follow these rules:"," *"," * ```bash"," * # Scenario:"," * # 'pstadler' is the user for connecting to the host and 'www' is the user"," * # under which you want to execute commands with sudo."," *"," * # 1. 'pstadler' has to be in the sudo group:"," * $ groups pstadler"," * pstadler : pstadler sudo"," *"," * # 2. 'pstadler' needs to be able to run sudo -u 'www' without a password."," * # In order to do this, add the following line to /etc/sudoers:"," * pstadler ALL=(www) NOPASSWD: ALL"," *"," * # 3. user 'www' needs to have a login shell (e.g. bash, sh, zsh, ...)"," * $ cat /etc/passwd | grep www"," * www:x:1002:1002::/home/www:/bin/bash   # GOOD"," * www:x:1002:1002::/home/www:/bin/false  # BAD"," * ```"," *"," * @method sudo(command[, options])"," * @return {Object} code: int, stdout: String, stderr: String"," */","Transport.prototype.sudo = function(command, options) {","  command = command || '';","  options = options || {};","","  var user = options.user || 'root';","","  command = format('%s%s', this._execWith, command);","  command = escapeSingleQuotes(command);","  command = format(\"echo '%s' | sudo -u %s -i bash\", command, user);","","  return this._exec(command, options);","};","","/**"," * Copy a list of files to the current target's remote host(s) using"," * `rsync` with the SSH protocol. File transfers are executed in parallel."," *  After finishing all transfers, an array containing results from"," * `transport.exec()` is returned. This method is only available on local"," * flights."," *"," * ```javascript"," * var files = ['path/to/file1', 'path/to/file2'];"," * local.transfer(files, '/tmp/foo');"," * ```"," *"," * #### Files argument"," * To make things more comfortable, the `files` argument doesn't have to be"," * passed as an array. Results from previous commands and zero-terminated"," * strings are handled as well:"," *"," * ```javascript"," * // use result from a previous command"," * var files = local.git('ls-files', {silent: true}); // get list of files under version control"," * local.transfer(files, '/tmp/foo');"," *"," * // use zero-terminated result from a previous command"," * var files = local.exec('(git ls-files -z;find node_modules -type f -print0)', {silent: true});"," * local.transfer(files, '/tmp/foo');"," *"," * // use results from multiple commands"," * var result1 = local.git('ls-files', {silent: true}).stdout.split('\\n');"," * var result2 = local.find('node_modules -type f', {silent: true}).stdout.split('\\n');"," * var files = result1.concat(result2);"," * files.push('path/to/another/file');"," * local.transfer(files, '/tmp/foo');"," * ```"," *"," * `transfer()` will use the current host's username defined with"," * `target()` unless `fly` is called with the `-u|--username` option."," * In this case the latter will be used. If debugging is enabled"," * (either with `target()` or with `fly --debug`), `rsync` is executed"," * in verbose mode (`-vv`)."," *"," * @method transfer(files, remoteDir[, options])"," * @return {Array} [results]"," */","Transport.prototype.transfer = function() {","  throw new Error('This transport does not implement `transfer(files, remoteDir, options)`');","};","","/**"," * Prompt for user input."," *"," * ```javascript"," * var input = transport.prompt('Are you sure you want to continue? [yes]');"," * if(input.indexOf('yes') === -1) {"," *   plan.abort('User canceled flight');"," * }"," *"," * // prompt for password (with UNIX-style hidden input)"," * var password = transport.prompt('Enter your password:', { hidden: true });"," *"," * // prompt when deploying to a specific target"," * if(plan.runtime.target === 'production') {"," *   var input = transport.prompt('Ready for deploying to production? [yes]');"," *   if(input.indexOf('yes') === -1) {"," *     plan.abort('User canceled flight');"," *   }"," * }"," * ```"," *"," * @method prompt(message[, options])"," * @return {String} input"," */","var promptQueue = queue();","","Transport.prototype.prompt = function(message, options) {","  options = options || {};","","  var prefix = this._context.remote.host;","","  return this.waitFor(function(done) {","    promptQueue.push(function() {","      prompt.colors = false;","      prompt.delimiter = '';","      prompt.message = chalk.gray(prefix) + ' * ';","      prompt.start();","","      prompt.get({","        name: 'input',","        description: chalk.blue(message),","        hidden: options.hidden || false,","        required: options.required || false","      }, function(err, result) {","        if(err) {","          throw new errors.ProcessInterruptedError('User canceled prompt');","        }","","        promptQueue.done(function() {","          done(result ? result.input : null);","        });","      });","    });","","    promptQueue.next();","  });","};","","/**"," * Execute a function and return after the callback `done` is called."," * This is used for running asynchronous functions in a synchronous way."," *"," * The callback takes an optional argument which is then returned by"," * `waitFor()`."," *"," * ```javascript"," * var result = transport.waitFor(function(done) {"," *   require('node-notifier').notify({"," *       message: 'Hello World'"," *     }, function(err, response) {"," *       done(err || 'sent!');"," *     });"," * });"," * console.log(result); // 'sent!'"," * ```"," *"," * @method waitFor(fn(done))"," * @return {} mixed"," */","Transport.prototype.waitFor = function(fn) {","  function task() {","    var future = new Future();","","    fn(function(result) {","      future.return(result);","    });","","    return future;","  }","","  return task().wait();","};","","/**"," * Execute commands with a certain context."," *"," * ```javascript"," * transport.with('cd /tmp', function() {"," *   transport.ls('-al'); // 'cd /tmp && ls -al'"," * });"," *"," * transport.with({silent: true, failsafe: true}, function() {"," *   transport.ls('-al'); // output suppressed, fail safely"," * });"," *"," * transport.with('cd /tmp', {silent: true}, function() {"," *   transport.ls('-al'); // 'cd /tmp && ls -al', output suppressed"," * });"," * ```"," *"," * @method with(command|options[, options], fn)"," */","Transport.prototype.with = function() {","  var previousExecWith = this._execWith;","  var previousOptions = extend({}, this._options); // clone","","  var args = Array.prototype.slice.call(arguments, 0);","","  for(var i in args) {","    if(typeof args[i] === 'string') {","      this._execWith += args[i] + ' && ';","    } else if(typeof args[i] === 'object') {","      this._options = extend(this._options, args[i]);","    } else if(typeof args[i] === 'function') {","      args[i]();","    }","  }","","  this._execWith = previousExecWith;","  this._options = previousOptions;","};","","/**"," * When calling `silent()` all subsequent commands are executed without"," * printing their output to stdout until `verbose()` is called."," *"," * ```javascript"," * transport.ls(); // output will be printed to stdout"," * transport.silent();"," * transport.ls(); // output won't be printed to stdout"," * ```"," *"," * @method silent()"," */","Transport.prototype.silent = function() {","  this._options.silent = true;","};","","/**"," * Calling `verbose()` reverts the behavior introduced with `silent()`."," * Output of commands will be printed to stdout."," *"," * ```javascript"," * transport.silent();"," * transport.ls(); // output won't be printed to stdout"," * transport.verbose();"," * transport.ls(); // output will be printed to stdout"," * ```"," *"," * @method verbose()"," */","Transport.prototype.verbose = function() {","  this._options.silent = false;","};","","/**"," * When calling `failsafe()`, all subsequent commands are allowed to fail"," * until `unsafe()` is called. In other words, the flight will continue"," * even if the return code of the command is not `0`. This is helpful if"," * either you expect a command to fail or their nature is to return a"," * non-zero exit code."," *"," * ```javascript"," * transport.failsafe();"," * transport.ls('foo'); // ls: foo: No such file or directory"," * transport.log('Previous command failed, but flight was not aborted');"," * ```"," *"," * @method failsafe()"," */","Transport.prototype.failsafe = function() {","  this._options.failsafe = true;","};","","/**"," * Calling `unsafe()` reverts the behavior introduced with `failsafe()`."," * The flight will be aborted if a subsequent command fails (i.e. returns"," * a non-zero exit code). This is the default behavior."," *"," * ```javascript"," * transport.failsafe();"," * transport.ls('foo'); // ls: foo: No such file or directory"," * transport.log('Previous command failed, but flight was not aborted');"," * transport.unsafe();"," * transport.ls('foo'); // ls: foo: No such file or directory"," * // flight aborted"," * ```"," *"," * @method unsafe()"," */","Transport.prototype.unsafe = function() {","  this._options.failsafe = false;","};","","/**"," * Print a message to stdout. Flightplan takes care that the message"," * is formatted correctly within the current context."," *"," * ```javascript"," * transport.log('Copying files to remote hosts');"," * ```"," *"," * @method log(message)"," */","Transport.prototype.log = function(message) {","  this._logger.user(message);","};","","/**"," * Print a debug message to stdout if debug mode is enabled. Flightplan"," * takes care that the message is formatted correctly within the current"," * context."," *"," * ```javascript"," * transport.debug('Copying files to remote hosts');"," * ```"," *"," * @method debug(message)"," */","Transport.prototype.debug = function(message) {","  this._logger.debug(message);","};","","Transport.prototype.close = function() {};","","module.exports = Transport;",""],"l":{"1":1,"53":1,"54":0,"55":0,"59":0,"61":0,"66":0,"68":0,"69":0,"70":0,"71":0,"72":0,"75":0,"76":0,"78":0,"83":1,"84":0,"137":1,"138":0,"139":0,"141":0,"186":1,"187":0,"188":0,"190":0,"192":0,"193":0,"194":0,"196":0,"242":1,"243":0,"270":1,"272":1,"273":0,"275":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"284":0,"290":0,"291":0,"294":0,"295":0,"300":0,"325":1,"326":1,"327":0,"329":0,"330":0,"333":0,"336":0,"358":1,"359":0,"360":0,"362":0,"364":0,"365":0,"366":0,"367":0,"368":0,"369":0,"370":0,"374":0,"375":0,"390":1,"391":0,"407":1,"408":0,"426":1,"427":0,"446":1,"447":0,"460":1,"461":0,"475":1,"476":0,"479":1,"481":1}},"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/transport/commands.js":{"path":"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/transport/commands.js","s":{"1":1,"2":1,"3":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":32,"column":2}},"2":{"start":{"line":34,"column":0},"end":{"line":41,"column":2}},"3":{"start":{"line":43,"column":0},"end":{"line":43,"column":38}}},"branchMap":{},"code":["var common = [","  'awk',","  'cat',","  'cd',","  'chgrp',","  'chmod',","  'chown',","  'cp',","  'echo',","  'find',","  'ftp',","  'grep',","  'groups',","  'hostname',","  'kill',","  'ln',","  'ls',","  'mkdir',","  'mv',","  'ps',","  'pwd',","  'rm',","  'rmdir',","  'scp',","  'sed',","  'tail',","  'tar',","  'touch',","  'unzip',","  'whoami',","  'zip'","];","","var extra = [","  'git',","  'hg',","  'node',","  'npm',","  'rsync',","  'svn'","];","","module.exports = common.concat(extra);"],"l":{"1":1,"34":1,"43":1}},"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/utils/queue.js":{"path":"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/utils/queue.js","s":{"1":1,"2":1,"3":1,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0,"22":0,"23":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":17},"end":{"line":1,"column":28}}},"2":{"name":"(anonymous_2)","line":7,"loc":{"start":{"line":7,"column":15},"end":{"line":7,"column":28}}},"3":{"name":"(anonymous_3)","line":11,"loc":{"start":{"line":11,"column":15},"end":{"line":11,"column":26}}},"4":{"name":"(anonymous_4)","line":22,"loc":{"start":{"line":22,"column":15},"end":{"line":22,"column":34}}},"5":{"name":"(anonymous_5)","line":38,"loc":{"start":{"line":38,"column":14},"end":{"line":38,"column":25}}},"6":{"name":"(anonymous_6)","line":39,"loc":{"start":{"line":39,"column":26},"end":{"line":39,"column":39}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":47,"column":2}},"2":{"start":{"line":2,"column":2},"end":{"line":5,"column":24}},"3":{"start":{"line":7,"column":2},"end":{"line":9,"column":4}},"4":{"start":{"line":8,"column":4},"end":{"line":8,"column":19}},"5":{"start":{"line":11,"column":2},"end":{"line":20,"column":4}},"6":{"start":{"line":12,"column":4},"end":{"line":14,"column":5}},"7":{"start":{"line":13,"column":6},"end":{"line":13,"column":13}},"8":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"9":{"start":{"line":18,"column":4},"end":{"line":18,"column":27}},"10":{"start":{"line":19,"column":4},"end":{"line":19,"column":9}},"11":{"start":{"line":22,"column":2},"end":{"line":36,"column":4}},"12":{"start":{"line":23,"column":4},"end":{"line":25,"column":5}},"13":{"start":{"line":24,"column":6},"end":{"line":24,"column":35}},"14":{"start":{"line":27,"column":4},"end":{"line":27,"column":22}},"15":{"start":{"line":29,"column":4},"end":{"line":33,"column":5}},"16":{"start":{"line":30,"column":6},"end":{"line":30,"column":18}},"17":{"start":{"line":32,"column":6},"end":{"line":32,"column":13}},"18":{"start":{"line":35,"column":4},"end":{"line":35,"column":17}},"19":{"start":{"line":38,"column":2},"end":{"line":44,"column":4}},"20":{"start":{"line":39,"column":4},"end":{"line":41,"column":7}},"21":{"start":{"line":40,"column":6},"end":{"line":40,"column":11}},"22":{"start":{"line":43,"column":4},"end":{"line":43,"column":23}},"23":{"start":{"line":46,"column":2},"end":{"line":46,"column":15}}},"branchMap":{"1":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":4},"end":{"line":12,"column":4}},{"start":{"line":12,"column":4},"end":{"line":12,"column":4}}]},"2":{"line":12,"type":"binary-expr","locations":[{"start":{"line":12,"column":7},"end":{"line":12,"column":16}},{"start":{"line":12,"column":20},"end":{"line":12,"column":38}}]},"3":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":4},"end":{"line":23,"column":4}},{"start":{"line":23,"column":4},"end":{"line":23,"column":4}}]},"4":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":4},"end":{"line":29,"column":4}},{"start":{"line":29,"column":4},"end":{"line":29,"column":4}}]}},"code":["module.exports = function() {","  var queue = {}","    , items = []","    , doneCallbacks = []","    , isRunning = false;","","  queue.push = function(fn) {","    items.push(fn);","  };","","  queue.next = function() {","    if(isRunning || items.length === 0) {","      return;","    }","","    isRunning = true;","","    var fn = items.shift();","    fn();","  };","","  queue.done = function(callback) {","    if(callback) {","      doneCallbacks.push(callback);","    }","","    isRunning = false;","","    if(items.length === 0) {","      queue.end();","","      return;","    }","","    queue.next();","  };","","  queue.end = function() {","    doneCallbacks.forEach(function(cb) {","      cb();","    });","","    doneCallbacks = [];","  };","","  return queue;","};",""],"l":{"1":1,"2":1,"7":1,"8":0,"11":1,"12":0,"13":0,"16":0,"18":0,"19":0,"22":1,"23":0,"24":0,"27":0,"29":0,"30":0,"32":0,"35":0,"38":1,"39":0,"40":0,"43":0,"46":1}},"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/flight/remote.js":{"path":"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/flight/remote.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1,"33":0,"34":0,"35":0},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"connect","line":11,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":27}}},"2":{"name":"(anonymous_2)","line":14,"loc":{"start":{"line":14,"column":12},"end":{"line":14,"column":23}}},"3":{"name":"execute","line":36,"loc":{"start":{"line":36,"column":0},"end":{"line":36,"column":32}}},"4":{"name":"(anonymous_4)","line":39,"loc":{"start":{"line":39,"column":12},"end":{"line":39,"column":23}}},"5":{"name":"(anonymous_5)","line":55,"loc":{"start":{"line":55,"column":14},"end":{"line":55,"column":36}}},"6":{"name":"(anonymous_6)","line":57,"loc":{"start":{"line":57,"column":34},"end":{"line":57,"column":49}}},"7":{"name":"(anonymous_7)","line":65,"loc":{"start":{"line":65,"column":31},"end":{"line":65,"column":52}}},"8":{"name":"(anonymous_8)","line":70,"loc":{"start":{"line":70,"column":21},"end":{"line":70,"column":32}}},"9":{"name":"(anonymous_9)","line":71,"loc":{"start":{"line":71,"column":23},"end":{"line":71,"column":44}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":7,"column":34}},"2":{"start":{"line":9,"column":0},"end":{"line":9,"column":22}},"3":{"start":{"line":11,"column":0},"end":{"line":34,"column":1}},"4":{"start":{"line":12,"column":2},"end":{"line":12,"column":28}},"5":{"start":{"line":14,"column":2},"end":{"line":31,"column":11}},"6":{"start":{"line":15,"column":4},"end":{"line":15,"column":64}},"7":{"start":{"line":17,"column":4},"end":{"line":28,"column":5}},"8":{"start":{"line":18,"column":6},"end":{"line":18,"column":41}},"9":{"start":{"line":19,"column":6},"end":{"line":19,"column":36}},"10":{"start":{"line":21,"column":6},"end":{"line":24,"column":7}},"11":{"start":{"line":22,"column":8},"end":{"line":23,"column":72}},"12":{"start":{"line":26,"column":6},"end":{"line":27,"column":62}},"13":{"start":{"line":30,"column":4},"end":{"line":30,"column":27}},"14":{"start":{"line":33,"column":2},"end":{"line":33,"column":16}},"15":{"start":{"line":36,"column":0},"end":{"line":53,"column":1}},"16":{"start":{"line":37,"column":2},"end":{"line":37,"column":28}},"17":{"start":{"line":39,"column":2},"end":{"line":50,"column":11}},"18":{"start":{"line":40,"column":4},"end":{"line":40,"column":29}},"19":{"start":{"line":42,"column":4},"end":{"line":42,"column":70}},"20":{"start":{"line":44,"column":4},"end":{"line":44,"column":18}},"21":{"start":{"line":46,"column":4},"end":{"line":47,"column":68}},"22":{"start":{"line":49,"column":4},"end":{"line":49,"column":27}},"23":{"start":{"line":52,"column":2},"end":{"line":52,"column":16}},"24":{"start":{"line":55,"column":0},"end":{"line":68,"column":2}},"25":{"start":{"line":56,"column":2},"end":{"line":63,"column":3}},"26":{"start":{"line":57,"column":4},"end":{"line":62,"column":8}},"27":{"start":{"line":58,"column":6},"end":{"line":58,"column":41}},"28":{"start":{"line":59,"column":6},"end":{"line":59,"column":29}},"29":{"start":{"line":61,"column":6},"end":{"line":61,"column":31}},"30":{"start":{"line":65,"column":2},"end":{"line":67,"column":6}},"31":{"start":{"line":66,"column":4},"end":{"line":66,"column":35}},"32":{"start":{"line":70,"column":0},"end":{"line":76,"column":2}},"33":{"start":{"line":71,"column":2},"end":{"line":73,"column":5}},"34":{"start":{"line":72,"column":4},"end":{"line":72,"column":23}},"35":{"start":{"line":75,"column":2},"end":{"line":75,"column":20}}},"branchMap":{"1":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":6},"end":{"line":21,"column":6}},{"start":{"line":21,"column":6},"end":{"line":21,"column":6}}]},"2":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":2},"end":{"line":56,"column":2}},{"start":{"line":56,"column":2},"end":{"line":56,"column":2}}]}},"code":["var Fiber = require('fibers')","  , Future = require('fibers/future')","  , extend = require('util-extend')","  , SSH = require('../transport/ssh')","  , logger = require('../logger')()","  , prettyTime = require('pretty-hrtime')","  , errors = require('../errors');","","var _connections = [];","","function connect(_context) {","  var future = new Future();","","  new Fiber(function() {","    logger.info(\"Connecting to '\" + _context.remote.host + \"'\");","","    try {","      var connection = new SSH(_context);","      _connections.push(connection);","    } catch(e) {","      if(!_context.remote.failsafe) {","        throw new errors.ConnectionFailedError(\"Error connecting to '\" +","                              _context.remote.host + \"': \" + e.message);","      }","","      logger.warn(\"Safely failed connecting to '\" +","                    _context.remote.host + \"': \" + e.message);","    }","","    return future.return();","  }).run();","","  return future;","}","","function execute(transport, fn) {","  var future = new Future();","","  new Fiber(function() {","    var t = process.hrtime();","","    logger.info('Executing remote task on ' + transport.runtime.host);","","    fn(transport);","","    logger.info('Remote task on ' + transport.runtime.host +","                ' finished after ' + prettyTime(process.hrtime(t)));","","    return future.return();","  }).run();","","  return future;","}","","exports.run = function(fn, context) {","  if(_connections.length === 0) {","    Future.wait(context.hosts.map(function(host) {","      var _context = extend({}, context);","      _context.remote = host;","","      return connect(_context);","    }));","  }","","  Future.wait(_connections.map(function(connection) {","    return execute(connection, fn);","  }));","};","","exports.disconnect = function() {","  _connections.forEach(function(connection) {","    connection.close();","  });","","  _connections = [];","};"],"l":{"1":1,"9":1,"11":1,"12":0,"14":0,"15":0,"17":0,"18":0,"19":0,"21":0,"22":0,"26":0,"30":0,"33":0,"36":1,"37":0,"39":0,"40":0,"42":0,"44":0,"46":0,"49":0,"52":0,"55":1,"56":0,"57":0,"58":0,"59":0,"61":0,"65":0,"66":0,"70":1,"71":0,"72":0,"75":0}},"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/transport/ssh.js":{"path":"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/lib/transport/ssh.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1,"59":0,"60":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"fnMap":{"1":{"name":"SSH","line":10,"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":22}}},"2":{"name":"next","line":30,"loc":{"start":{"line":30,"column":46},"end":{"line":31,"column":80}}},"3":{"name":"(anonymous_3)","line":37,"loc":{"start":{"line":37,"column":16},"end":{"line":37,"column":27}}},"4":{"name":"(anonymous_4)","line":48,"loc":{"start":{"line":48,"column":31},"end":{"line":48,"column":42}}},"5":{"name":"(anonymous_5)","line":52,"loc":{"start":{"line":52,"column":31},"end":{"line":52,"column":45}}},"6":{"name":"(anonymous_6)","line":62,"loc":{"start":{"line":62,"column":22},"end":{"line":62,"column":49}}},"7":{"name":"(anonymous_7)","line":79,"loc":{"start":{"line":79,"column":53},"end":{"line":79,"column":75}}},"8":{"name":"(anonymous_8)","line":81,"loc":{"start":{"line":81,"column":22},"end":{"line":81,"column":37}}},"9":{"name":"(anonymous_9)","line":85,"loc":{"start":{"line":85,"column":29},"end":{"line":85,"column":44}}},"10":{"name":"(anonymous_10)","line":89,"loc":{"start":{"line":89,"column":56},"end":{"line":89,"column":71}}},"11":{"name":"(anonymous_11)","line":95,"loc":{"start":{"line":95,"column":63},"end":{"line":95,"column":78}}},"12":{"name":"(anonymous_12)","line":99,"loc":{"start":{"line":99,"column":22},"end":{"line":99,"column":37}}},"13":{"name":"(anonymous_13)","line":103,"loc":{"start":{"line":103,"column":21},"end":{"line":103,"column":32}}},"14":{"name":"(anonymous_14)","line":124,"loc":{"start":{"line":124,"column":22},"end":{"line":124,"column":33}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":8,"column":23}},"2":{"start":{"line":10,"column":0},"end":{"line":59,"column":1}},"3":{"start":{"line":11,"column":2},"end":{"line":11,"column":33}},"4":{"start":{"line":13,"column":2},"end":{"line":13,"column":42}},"5":{"start":{"line":15,"column":2},"end":{"line":18,"column":3}},"6":{"start":{"line":16,"column":4},"end":{"line":16,"column":30}},"7":{"start":{"line":17,"column":4},"end":{"line":17,"column":55}},"8":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"9":{"start":{"line":21,"column":4},"end":{"line":21,"column":81}},"10":{"start":{"line":24,"column":2},"end":{"line":24,"column":18}},"11":{"start":{"line":26,"column":2},"end":{"line":26,"column":28}},"12":{"start":{"line":28,"column":2},"end":{"line":28,"column":38}},"13":{"start":{"line":30,"column":2},"end":{"line":46,"column":5}},"14":{"start":{"line":32,"column":4},"end":{"line":32,"column":28}},"15":{"start":{"line":34,"column":4},"end":{"line":34,"column":48}},"16":{"start":{"line":36,"column":4},"end":{"line":45,"column":5}},"17":{"start":{"line":37,"column":6},"end":{"line":42,"column":15}},"18":{"start":{"line":38,"column":8},"end":{"line":38,"column":88}},"19":{"start":{"line":39,"column":8},"end":{"line":39,"column":29}},"20":{"start":{"line":41,"column":8},"end":{"line":41,"column":77}},"21":{"start":{"line":44,"column":6},"end":{"line":44,"column":22}},"22":{"start":{"line":48,"column":2},"end":{"line":50,"column":5}},"23":{"start":{"line":49,"column":4},"end":{"line":49,"column":16}},"24":{"start":{"line":52,"column":2},"end":{"line":54,"column":5}},"25":{"start":{"line":53,"column":4},"end":{"line":53,"column":32}},"26":{"start":{"line":56,"column":2},"end":{"line":56,"column":35}},"27":{"start":{"line":58,"column":2},"end":{"line":58,"column":23}},"28":{"start":{"line":60,"column":0},"end":{"line":60,"column":30}},"29":{"start":{"line":62,"column":0},"end":{"line":122,"column":2}},"30":{"start":{"line":63,"column":2},"end":{"line":63,"column":26}},"31":{"start":{"line":65,"column":2},"end":{"line":65,"column":18}},"32":{"start":{"line":67,"column":2},"end":{"line":67,"column":55}},"33":{"start":{"line":69,"column":2},"end":{"line":73,"column":4}},"34":{"start":{"line":75,"column":2},"end":{"line":75,"column":32}},"35":{"start":{"line":77,"column":2},"end":{"line":77,"column":28}},"36":{"start":{"line":79,"column":2},"end":{"line":119,"column":5}},"37":{"start":{"line":81,"column":4},"end":{"line":83,"column":7}},"38":{"start":{"line":82,"column":6},"end":{"line":82,"column":51}},"39":{"start":{"line":85,"column":4},"end":{"line":87,"column":7}},"40":{"start":{"line":86,"column":6},"end":{"line":86,"column":51}},"41":{"start":{"line":89,"column":4},"end":{"line":93,"column":7}},"42":{"start":{"line":90,"column":6},"end":{"line":92,"column":7}},"43":{"start":{"line":91,"column":8},"end":{"line":91,"column":34}},"44":{"start":{"line":95,"column":4},"end":{"line":97,"column":7}},"45":{"start":{"line":96,"column":6},"end":{"line":96,"column":66}},"46":{"start":{"line":99,"column":4},"end":{"line":101,"column":7}},"47":{"start":{"line":100,"column":6},"end":{"line":100,"column":25}},"48":{"start":{"line":103,"column":4},"end":{"line":118,"column":7}},"49":{"start":{"line":104,"column":6},"end":{"line":115,"column":7}},"50":{"start":{"line":105,"column":8},"end":{"line":105,"column":35}},"51":{"start":{"line":106,"column":13},"end":{"line":115,"column":7}},"52":{"start":{"line":107,"column":8},"end":{"line":107,"column":65}},"53":{"start":{"line":109,"column":8},"end":{"line":109,"column":59}},"54":{"start":{"line":111,"column":8},"end":{"line":112,"column":79}},"55":{"start":{"line":114,"column":8},"end":{"line":114,"column":38}},"56":{"start":{"line":117,"column":6},"end":{"line":117,"column":24}},"57":{"start":{"line":121,"column":2},"end":{"line":121,"column":23}},"58":{"start":{"line":124,"column":0},"end":{"line":126,"column":2}},"59":{"start":{"line":125,"column":2},"end":{"line":125,"column":25}},"60":{"start":{"line":128,"column":0},"end":{"line":128,"column":21}}},"branchMap":{"1":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":2},"end":{"line":15,"column":2}},{"start":{"line":15,"column":2},"end":{"line":15,"column":2}}]},"2":{"line":17,"type":"binary-expr","locations":[{"start":{"line":17,"column":26},"end":{"line":17,"column":45}},{"start":{"line":17,"column":49},"end":{"line":17,"column":54}}]},"3":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":20,"column":2}},{"start":{"line":20,"column":2},"end":{"line":20,"column":2}}]},"4":{"line":32,"type":"binary-expr","locations":[{"start":{"line":32,"column":14},"end":{"line":32,"column":21}},{"start":{"line":32,"column":25},"end":{"line":32,"column":27}}]},"5":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":4},"end":{"line":36,"column":4}},{"start":{"line":36,"column":4},"end":{"line":36,"column":4}}]},"6":{"line":63,"type":"binary-expr","locations":[{"start":{"line":63,"column":12},"end":{"line":63,"column":19}},{"start":{"line":63,"column":23},"end":{"line":63,"column":25}}]},"7":{"line":79,"type":"binary-expr","locations":[{"start":{"line":79,"column":33},"end":{"line":79,"column":45}},{"start":{"line":79,"column":49},"end":{"line":79,"column":51}}]},"8":{"line":82,"type":"binary-expr","locations":[{"start":{"line":82,"column":23},"end":{"line":82,"column":36}},{"start":{"line":82,"column":40},"end":{"line":82,"column":42}}]},"9":{"line":86,"type":"binary-expr","locations":[{"start":{"line":86,"column":23},"end":{"line":86,"column":36}},{"start":{"line":86,"column":40},"end":{"line":86,"column":42}}]},"10":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":6},"end":{"line":90,"column":6}},{"start":{"line":90,"column":6},"end":{"line":90,"column":6}}]},"11":{"line":96,"type":"cond-expr","locations":[{"start":{"line":96,"column":38},"end":{"line":96,"column":47}},{"start":{"line":96,"column":50},"end":{"line":96,"column":58}}]},"12":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":6},"end":{"line":104,"column":6}},{"start":{"line":104,"column":6},"end":{"line":104,"column":6}}]},"13":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":13},"end":{"line":106,"column":13}},{"start":{"line":106,"column":13},"end":{"line":106,"column":13}}]}},"code":["var util = require('util')","  , extend = require('util-extend')","  , Fiber = require('fibers')","  , Connection = require('ssh2').Client","  , byline = require('byline')","  , Transport = require('./index')","  , errors = require('../errors')","  , fs = require('fs');","","function SSH(context) {","  SSH.super_.call(this, context);","","  var config = extend({}, context.remote); // clone","","  if(config.tryKeyboard !== false) {","    config.tryKeyboard = true;","    config.readyTimeout = config.readyTimeout || 30000;","  }","","  if(config.privateKey) {","    config.privateKey = fs.readFileSync(config.privateKey, { encoding: 'utf8' });","  }","","  var self = this;","","  var fiber = Fiber.current;","","  this._connection = new Connection();","","  this._connection.on('keyboard-interactive', function next(name, instructions,","                                    instructionsLang, prompts, finish, answers) {","    answers = answers || [];","","    var currentPrompt = prompts[answers.length];","","    if(answers.length < prompts.length) {","      new Fiber(function() {","        var answer = self.prompt(currentPrompt.prompt, { hidden: !currentPrompt.echo });","        answers.push(answer);","","        next(name, instructions, instructionsLang, prompts, finish, answers);","      }).run();","    } else {","      finish(answers);","    }","  });","","  this._connection.on('ready', function() {","    fiber.run();","  });","","  this._connection.on('error', function(err) {","    return fiber.throwInto(err);","  });","","  this._connection.connect(config);","","  return Fiber.yield();","}","util.inherits(SSH, Transport);","","SSH.prototype._exec = function(command, options) {","  options = options || {};","","  var self = this;","","  options = extend(extend({}, self._options), options); // clone and extend","","  var result = {","    code: 0,","    stdout: null,","    stderr: null","  };","","  self._logger.command(command);","","  var fiber = Fiber.current;","","  self._connection.exec(command, options.exec || {}, function(err, stream) {","","    stream.on('data', function(data) {","      result.stdout = (result.stdout || '') + data;","    });","","    stream.stderr.on('data', function(data) {","      result.stderr = (result.stderr || '') + data;","    });","","    byline(stream, { keepEmptyLines: true }).on('data', function(data) {","      if(!options.silent) {","        self._logger.stdout(data);","      }","    });","","    byline(stream.stderr, { keepEmptyLines: true }).on('data', function(data) {","      self._logger[options.failsafe ? 'stdwarn' : 'stderr'](data);","    });","","    stream.on('exit', function(code) {","      result.code = code;","    });","","    stream.on('end', function() {","      if(result.code === 0) {","        self._logger.success('ok');","      } else if(options.failsafe) {","        self._logger.warn('failed safely (' + result.code + ')');","      } else {","        self._logger.error('failed (' + result.code + ')');","","        var error = new errors.CommandExitedAbnormallyError(","                  'Command exited abnormally on ' + self._context.remote.host);","","        return fiber.throwInto(error);","      }","","      fiber.run(result);","    });","  });","","  return Fiber.yield();","};","","SSH.prototype.close = function() {","  this._connection.end();","};","","module.exports = SSH;",""],"l":{"1":1,"10":1,"11":0,"13":0,"15":0,"16":0,"17":0,"20":0,"21":0,"24":0,"26":0,"28":0,"30":0,"32":0,"34":0,"36":0,"37":0,"38":0,"39":0,"41":0,"44":0,"48":0,"49":0,"52":0,"53":0,"56":0,"58":0,"60":1,"62":1,"63":0,"65":0,"67":0,"69":0,"75":0,"77":0,"79":0,"81":0,"82":0,"85":0,"86":0,"89":0,"90":0,"91":0,"95":0,"96":0,"99":0,"100":0,"103":0,"104":0,"105":0,"106":0,"107":0,"109":0,"111":0,"114":0,"117":0,"121":0,"124":1,"125":0,"128":1}},"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/bin/fly.js":{"path":"/home/travis/build/npmtest/node-npmtest-flightplan/node_modules/flightplan/bin/fly.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":1,"9":0,"10":0,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":1,"18":1,"19":0,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":1},"b":{"1":[0,1],"2":[0,1],"3":[0,1],"4":[0,1],"5":[1,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":73,"loc":{"start":{"line":73,"column":22},"end":{"line":73,"column":37}}},"2":{"name":"(anonymous_2)","line":78,"loc":{"start":{"line":78,"column":13},"end":{"line":78,"column":27}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":9,"column":36}},"2":{"start":{"line":11,"column":0},"end":{"line":18,"column":2}},"3":{"start":{"line":20,"column":0},"end":{"line":29,"column":2}},"4":{"start":{"line":31,"column":0},"end":{"line":31,"column":62}},"5":{"start":{"line":33,"column":0},"end":{"line":49,"column":1}},"6":{"start":{"line":34,"column":2},"end":{"line":47,"column":4}},"7":{"start":{"line":48,"column":2},"end":{"line":48,"column":18}},"8":{"start":{"line":51,"column":0},"end":{"line":54,"column":1}},"9":{"start":{"line":52,"column":2},"end":{"line":52,"column":59}},"10":{"start":{"line":53,"column":2},"end":{"line":53,"column":18}},"11":{"start":{"line":56,"column":0},"end":{"line":56,"column":9}},"12":{"start":{"line":57,"column":0},"end":{"line":57,"column":72}},"13":{"start":{"line":59,"column":0},"end":{"line":63,"column":1}},"14":{"start":{"line":60,"column":2},"end":{"line":60,"column":29}},"15":{"start":{"line":61,"column":2},"end":{"line":61,"column":19}},"16":{"start":{"line":62,"column":2},"end":{"line":62,"column":21}},"17":{"start":{"line":65,"column":0},"end":{"line":71,"column":3}},"18":{"start":{"line":73,"column":0},"end":{"line":76,"column":3}},"19":{"start":{"line":74,"column":2},"end":{"line":74,"column":76}},"20":{"start":{"line":75,"column":2},"end":{"line":75,"column":18}},"21":{"start":{"line":78,"column":0},"end":{"line":129,"column":2}},"22":{"start":{"line":80,"column":2},"end":{"line":83,"column":3}},"23":{"start":{"line":81,"column":4},"end":{"line":81,"column":99}},"24":{"start":{"line":82,"column":4},"end":{"line":82,"column":20}},"25":{"start":{"line":85,"column":2},"end":{"line":88,"column":3}},"26":{"start":{"line":86,"column":4},"end":{"line":86,"column":95}},"27":{"start":{"line":87,"column":4},"end":{"line":87,"column":20}},"28":{"start":{"line":90,"column":2},"end":{"line":93,"column":3}},"29":{"start":{"line":91,"column":4},"end":{"line":91,"column":88}},"30":{"start":{"line":92,"column":4},"end":{"line":92,"column":20}},"31":{"start":{"line":95,"column":2},"end":{"line":95,"column":32}},"32":{"start":{"line":97,"column":2},"end":{"line":97,"column":26}},"33":{"start":{"line":98,"column":2},"end":{"line":98,"column":41}},"34":{"start":{"line":100,"column":2},"end":{"line":107,"column":3}},"35":{"start":{"line":101,"column":4},"end":{"line":104,"column":6}},"36":{"start":{"line":106,"column":4},"end":{"line":106,"column":20}},"37":{"start":{"line":109,"column":2},"end":{"line":116,"column":3}},"38":{"start":{"line":110,"column":4},"end":{"line":113,"column":6}},"39":{"start":{"line":115,"column":4},"end":{"line":115,"column":20}},"40":{"start":{"line":118,"column":2},"end":{"line":126,"column":3}},"41":{"start":{"line":119,"column":4},"end":{"line":123,"column":6}},"42":{"start":{"line":125,"column":4},"end":{"line":125,"column":20}},"43":{"start":{"line":128,"column":2},"end":{"line":128,"column":38}},"44":{"start":{"line":131,"column":0},"end":{"line":133,"column":11}}},"branchMap":{"1":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":0},"end":{"line":33,"column":0}},{"start":{"line":33,"column":0},"end":{"line":33,"column":0}}]},"2":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":0},"end":{"line":51,"column":0}},{"start":{"line":51,"column":0},"end":{"line":51,"column":0}}]},"3":{"line":57,"type":"cond-expr","locations":[{"start":{"line":57,"column":42},"end":{"line":57,"column":64}},{"start":{"line":57,"column":67},"end":{"line":57,"column":71}}]},"4":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":0},"end":{"line":59,"column":0}},{"start":{"line":59,"column":0},"end":{"line":59,"column":0}}]},"5":{"line":59,"type":"binary-expr","locations":[{"start":{"line":59,"column":3},"end":{"line":59,"column":9}},{"start":{"line":59,"column":13},"end":{"line":59,"column":39}}]},"6":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":2},"end":{"line":80,"column":2}},{"start":{"line":80,"column":2},"end":{"line":80,"column":2}}]},"7":{"line":81,"type":"binary-expr","locations":[{"start":{"line":81,"column":58},"end":{"line":81,"column":76}},{"start":{"line":81,"column":80},"end":{"line":81,"column":95}}]},"8":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":2},"end":{"line":85,"column":2}},{"start":{"line":85,"column":2},"end":{"line":85,"column":2}}]},"9":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":2},"end":{"line":90,"column":2}},{"start":{"line":90,"column":2},"end":{"line":90,"column":2}}]},"10":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":2},"end":{"line":100,"column":2}},{"start":{"line":100,"column":2},"end":{"line":100,"column":2}}]},"11":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":2},"end":{"line":109,"column":2}},{"start":{"line":109,"column":2},"end":{"line":109,"column":2}}]},"12":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":2},"end":{"line":118,"column":2}},{"start":{"line":118,"column":2},"end":{"line":118,"column":2}}]}},"code":["//#!/usr/bin/env node","","var Liftoff = require('liftoff')","  , interpret = require('interpret')","  , v8flags = require('v8flags')","  , semver = require('semver')","  , cliPackage = require('../package')","  , nopt = require('nopt')","  , format = require('util').format;","","var knownOptions = {","  'flightplan': String,","  'username': String,","  'debug': Boolean,","  'color': Boolean,","  'version': Boolean,","  'help': Boolean","};","","var shortHands = {","  'f': ['--flightplan'],","  'u': ['--username'],","  'd': ['--debug'],","  'C': ['--no-color'],","  't': ['--targets'],","  'T': ['--tasks'],","  'v': ['--version'],","  'h': ['--help']","};","","var options = nopt(knownOptions, shortHands, process.argv, 2);","","if(options.help) {","  process.stdout.write(","    '\\n' +","    '  Usage: fly [task:]target [options]\\n\\n' +","    '  Options:\\n\\n' +","    '    -f, --flightplan <file>  path to flightplan\\n' +","    '    -u, --username <name>    user for connecting to remote hosts\\n' +","    '    -d, --debug              enable debug mode\\n' +","    '    -C, --no-color           disable color output\\n' +","    '    -t, --targets            output available targets\\n' +","    '    -T, --tasks              output available tasks\\n' +","    '    -v, --version            output the version number\\n' +","    '    -h, --help               output usage information\\n' +","    '\\n'","  );","  process.exit(1);","}","","if(options.version) {","  process.stdout.write(format('%s\\n', cliPackage.version));","  process.exit(1);","}","","var task;","var target = options.argv.remain.length ? options.argv.remain[0] : null;","","if(target && target.indexOf(':') !== -1) {","  target = target.split(':');","  task = target[0];","  target = target[1];","}","","var cli = new Liftoff({","  name: 'flightplan',","  processTitle: 'Flightplan',","  configName: 'flightplan',","  extensions: interpret.jsVariants,","  v8flags: v8flags","});","","cli.on('requireFail', function(name) {","  process.stderr.write(format('Error: Unable to load module \"%s\"\\n', name));","  process.exit(1);","});","","var invoke = function(env) {","","  if(!env.configPath) {","    process.stderr.write(format('Error: %s not found\\n', (options.flightplan || 'flightplan.js')));","    process.exit(1);","  }","","  if(!env.modulePath) {","    process.stderr.write(format('Error: Local flightplan package not found in %s\\n', env.cwd));","    process.exit(1);","  }","","  if(!semver.satisfies(env.modulePackage.version, '>=0.5.0')) {","    process.stderr.write('Error: local flightplan package version should be >=0.5.0\\n');","    process.exit(1);","  }","","  process.chdir(env.configBase);","","  require(env.configPath); // eslint-disable-line global-require","  var instance = require(env.modulePath); // eslint-disable-line global-require","","  if(options.targets) {","    process.stdout.write(","      'Available targets:\\n' +","      '  ' + instance.availableTargets().join('\\n  ') + '\\n'","    );","","    process.exit(0);","  }","","  if(options.tasks) {","    process.stdout.write(","      'Available tasks:\\n' +","      '  ' + instance.availableTasks().join('\\n  ') + '\\n'","    );","","    process.exit(0);","  }","","  if(!target) {","    process.stderr.write(","      'Error: No target specified. Use `--help` for more information\\n\\n' +","      'Available targets:\\n' +","      '  ' + instance.availableTargets().join('\\n  ') + '\\n'","    );","","    process.exit(1);","  }","","  instance.run(task, target, options);","};","","cli.launch({","  configPath: options.flightplan","}, invoke);",""],"l":{"3":1,"11":1,"20":1,"31":1,"33":1,"34":0,"48":0,"51":1,"52":0,"53":0,"56":1,"57":1,"59":1,"60":0,"61":0,"62":0,"65":1,"73":1,"74":0,"75":0,"78":1,"80":0,"81":0,"82":0,"85":0,"86":0,"87":0,"90":0,"91":0,"92":0,"95":0,"97":0,"98":0,"100":0,"101":0,"106":0,"109":0,"110":0,"115":0,"118":0,"119":0,"125":0,"128":0,"131":1}}}